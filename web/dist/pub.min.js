/*!
 * projectmanager - compressed JS
 * @licence projectmanager - v1.0.0 (2016-09-20)
  */
"use strict";function md5_binary(a){function b(a,b,c){return a&b|~a&c}function c(a,b,c){return a&c|b&~c}function d(a,b,c){return a^b^c}function e(a,b,c){return b^(a|~c)}function f(a,c,d,e,f,g,h){return modularAdd(rotateLeft(modularAdd(a,modularAdd(modularAdd(b(c,d,e),f),h)),g),c)}function g(a,b,d,e,f,g,h){return modularAdd(rotateLeft(modularAdd(a,modularAdd(modularAdd(c(b,d,e),f),h)),g),b)}function h(a,b,c,e,f,g,h){return modularAdd(rotateLeft(modularAdd(a,modularAdd(modularAdd(d(b,c,e),f),h)),g),b)}function i(a,b,c,d,f,g,h){return modularAdd(rotateLeft(modularAdd(a,modularAdd(modularAdd(e(b,c,d),f),h)),g),b)}var j=Array(),k=7,l=12,m=17,n=22,o=5,p=9,q=14,r=20,s=4,t=11,u=16,v=23,w=6,x=10,y=15,z=21,A=1732584193,B=4023233417,C=2562383102,D=271733878,j=strToLittleEndianArray(a),E=a.length*charBit;j[E>>5]|=128<<(31&E),j[(E+64>>>9<<4)+14]=E;for(var F=j.length,G=0;F>G;G+=16){var H=A,I=B,J=C,K=D;A=f(A,B,C,D,j[G+0],k,3614090360),D=f(D,A,B,C,j[G+1],l,3905402710),C=f(C,D,A,B,j[G+2],m,606105819),B=f(B,C,D,A,j[G+3],n,3250441966),A=f(A,B,C,D,j[G+4],k,4118548399),D=f(D,A,B,C,j[G+5],l,1200080426),C=f(C,D,A,B,j[G+6],m,2821735955),B=f(B,C,D,A,j[G+7],n,4249261313),A=f(A,B,C,D,j[G+8],k,1770035416),D=f(D,A,B,C,j[G+9],l,2336552879),C=f(C,D,A,B,j[G+10],m,4294925233),B=f(B,C,D,A,j[G+11],n,2304563134),A=f(A,B,C,D,j[G+12],k,1804603682),D=f(D,A,B,C,j[G+13],l,4254626195),C=f(C,D,A,B,j[G+14],m,2792965006),B=f(B,C,D,A,j[G+15],n,1236535329),A=g(A,B,C,D,j[G+1],o,4129170786),D=g(D,A,B,C,j[G+6],p,3225465664),C=g(C,D,A,B,j[G+11],q,643717713),B=g(B,C,D,A,j[G+0],r,3921069994),A=g(A,B,C,D,j[G+5],o,3593408605),D=g(D,A,B,C,j[G+10],p,38016083),C=g(C,D,A,B,j[G+15],q,3634488961),B=g(B,C,D,A,j[G+4],r,3889429448),A=g(A,B,C,D,j[G+9],o,568446438),D=g(D,A,B,C,j[G+14],p,3275163606),C=g(C,D,A,B,j[G+3],q,4107603335),B=g(B,C,D,A,j[G+8],r,1163531501),A=g(A,B,C,D,j[G+13],o,2850285829),D=g(D,A,B,C,j[G+2],p,4243563512),C=g(C,D,A,B,j[G+7],q,1735328473),B=g(B,C,D,A,j[G+12],r,2368359562),A=h(A,B,C,D,j[G+5],s,4294588738),D=h(D,A,B,C,j[G+8],t,2272392833),C=h(C,D,A,B,j[G+11],u,1839030562),B=h(B,C,D,A,j[G+14],v,4259657740),A=h(A,B,C,D,j[G+1],s,2763975236),D=h(D,A,B,C,j[G+4],t,1272893353),C=h(C,D,A,B,j[G+7],u,4139469664),B=h(B,C,D,A,j[G+10],v,3200236656),A=h(A,B,C,D,j[G+13],s,681279174),D=h(D,A,B,C,j[G+0],t,3936430074),C=h(C,D,A,B,j[G+3],u,3572445317),B=h(B,C,D,A,j[G+6],v,76029189),A=h(A,B,C,D,j[G+9],s,3654602809),D=h(D,A,B,C,j[G+12],t,3873151461),C=h(C,D,A,B,j[G+15],u,530742520),B=h(B,C,D,A,j[G+2],v,3299628645),A=i(A,B,C,D,j[G+0],w,4096336452),D=i(D,A,B,C,j[G+7],x,1126891415),C=i(C,D,A,B,j[G+14],y,2878612391),B=i(B,C,D,A,j[G+5],z,4237533241),A=i(A,B,C,D,j[G+12],w,1700485571),D=i(D,A,B,C,j[G+3],x,2399980690),C=i(C,D,A,B,j[G+10],y,4293915773),B=i(B,C,D,A,j[G+1],z,2240044497),A=i(A,B,C,D,j[G+8],w,1873313359),D=i(D,A,B,C,j[G+15],x,4264355552),C=i(C,D,A,B,j[G+6],y,2734768916),B=i(B,C,D,A,j[G+13],z,1309151649),A=i(A,B,C,D,j[G+4],w,4149444226),D=i(D,A,B,C,j[G+11],x,3174756917),C=i(C,D,A,B,j[G+2],y,718787259),B=i(B,C,D,A,j[G+9],z,3951481745),A=modularAdd(A,H),B=modularAdd(B,I),C=modularAdd(C,J),D=modularAdd(D,K)}return Array(A,B,C,D)}function md5(a){return littleEndianArrayToHex(md5_binary(a))}function addPadding(a,b,c){if(b%c!=0)var d=b-c%b;else var d=0;if(standardPadding)for(var e=0;d>e;e++)a+=String.fromCharCode(d);else for(var e=0;d>e;e++)a+=String.fromCharCode(0);return a}function removePadding(a,b){return standardPadding?a.substr(0,b-a.charCodeAt(a.length-1)):a}function strToLittleEndianArray(a){for(var b=Array(),c=(1<<charBit)-1,d=a.length,e=0,f=0;d>f;e+=charBit)b[e>>5]|=(a.charCodeAt(f++)&c)<<(31&e);return b}function strToBigEndianArray(a){for(var b=Array(),c=(1<<charBit)-1,d=a.length,e=0,f=0;d>f;e+=charBit)b[e>>5]|=(a.charCodeAt(f++)&c)<<32-charBit-(31&e);return b}function littleEndianArrayToHex(a){for(var b=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),c="",d=a.length,e=0,f=d<<2;f>e;e++)c+=b[a[e>>2]>>((3&e)<<3)+4&15]+b[a[e>>2]>>((3&e)<<3)&15];return c}function bigEndianArrayToHex(a){for(var b=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),c="",d=a.length,e=0,f=d<<2;f>e;e++)c+=b[a[e>>2]>>(3-(3&e)<<3)+4&15]+b[a[e>>2]>>(3-(3&e)<<3)&15];return c}function rotateLeft(a,b){return a<<b|a>>>32-b}function rotateRight(a,b){return a>>>b|a<<32-b}function modularAdd(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return(d<<16)+(65535&c)}function modularSubtract(a,b){return modularAdd(a,-b)}function binxor(a,b){var c=(0>a?a+4294967296:a)^(0>b?b+4294967296:b);return 0>c?c+4294967296:c}function hexToStr(a){var b=(new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),"0123456789abcdef"),c="",d=a.length;a=new String(a),a=a.toLowerCase(),d%2==1&&(a+="0");for(var e=0;d>e;e+=2){var f=a.substr(e,1),g=a.substr(e+1,1),h=b.indexOf(f),i=b.indexOf(g);if(-1==h||-1==i)throw HEX_BROKEN;var j=h<<4|i;c+=""+String.fromCharCode(parseInt(j))}return c}function strToHex(a){var b=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),c="",d=a.length;a=new String(a);for(var e=0;d>e;e++){var f=a.charCodeAt(e),g=""+b[f>>4]+b[15&f];c+=""+g}return c}function strToInt(a){var b=new Array,c=a.length,d=0,e=0;do b[e++]=a.charCodeAt(d++)+(a.charCodeAt(d++)<<8)+(a.charCodeAt(d++)<<16)+(a.charCodeAt(d++)<<24);while(c>d);return b}function intToStr(a){for(var b=a.length,c=0;b>c;c++)a[c]=String.fromCharCode(255&a[c],a[c]>>>8&255,a[c]>>>16&255,a[c]>>>24&255);return a.join("")}function Node(a,b,c,d,e,f,g,h,i,j,k){this.id=a,this.pid=b,this.name=c,this.url=d,this.title=e,this.target=f,this.icon=g,this.iconOpen=h,this._io=i||!1,this._is=!!j,this._ls=!1,this._hc=!1,this._ai=0,this._p,this.userData=k||null}function dTree(a,b){this.config={target:null,folderLinks:!0,useSelection:!0,useLines:!0,useIcons:!0,useStatusText:!1,closeSameLevel:!1,inOrder:!1,multiSelect:!1,checkbox:!1},this.icon={root:b+"/folderopen.gif",folder:b+"/folder.gif",folderOpen:b+"/folderopen.gif",node:b+"/page.gif",empty:b+"/empty.gif",line:b+"/line.gif",join:b+"/join.gif",joinBottom:b+"/joinbottom.gif",plus:b+"/plus.gif",plusBottom:b+"/plusbottom.gif",minus:b+"/minus.gif",minusBottom:b+"/minusbottom.gif",nlPlus:b+"/nolines_plus.gif",nlMinus:b+"/nolines_minus.gif"},this.obj=a,this.aNodes=[],this.aIndent=[],this.root=new Node(-1),this.selectedNode=[],this.selectedFound=!1,this.completed=!1}angular.module("ngLocale",[],["$provide",function(a){var b={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};a.value("$locale",{DATETIME_FORMATS:{AMPMS:["上午","下午"],DAY:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],ERANAMES:["公元前","公元"],ERAS:["公元前","公元"],FIRSTDAYOFWEEK:6,MONTH:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],SHORTDAY:["周日","周一","周二","周三","周四","周五","周六"],SHORTMONTH:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],STANDALONEMONTH:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],WEEKENDRANGE:[5,6],fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"y年M月d日 ah:mm:ss",mediumDate:"y年M月d日",mediumTime:"ah:mm:ss","short":"yy/M/d ah:mm",shortDate:"yy/M/d",shortTime:"ah:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"¥",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤ ",negSuf:"",posPre:"¤ ",posSuf:""}]},id:"zh-cn",localeID:"zh_CN",pluralCat:function(a,c){return b.OTHER}})}]),angular.module("ngLocale",[],["$provide",function(a){var b={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};a.value("$locale",{DATETIME_FORMATS:{AMPMS:["上午","下午"],DAY:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],ERANAMES:["公元前","公元"],ERAS:["公元前","公元"],FIRSTDAYOFWEEK:6,MONTH:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],SHORTDAY:["周日","周一","周二","周三","周四","周五","周六"],SHORTMONTH:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],STANDALONEMONTH:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],WEEKENDRANGE:[5,6],fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"y年M月d日 ah:mm:ss",mediumDate:"y年M月d日",mediumTime:"ah:mm:ss","short":"yy/M/d ah:mm",shortDate:"yy/M/d",shortTime:"ah:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"¥",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤ ",negSuf:"",posPre:"¤ ",posSuf:""}]},id:"zh-cn",localeID:"zh_CN",pluralCat:function(a,c){return b.OTHER}})}]),angular.module("util.httpInterceptor",["uv.service.loading","uvm.service.alert"]).provider("myHttpInterceptor",[function(){return{setLoginUrl:function(a){this.login_url=a},$get:["$q","$window",function(a,b){var c=this;return{request:function(a){return b.sessionStorage.Authorization&&(a.headers.Authorization=b.sessionStorage.Authorization),a.headers["Cache-Control"]="no-cache",a},response:function(a){return a},responseError:function(b){return 401===b.status?(window.alert("登录过期,请重新登录"),window.location.href=c.login_url||"/"):403==b.status&&(console.log(b.data),window.alert("登录过期,请重新登录"),window.location.href=c.login_url||"/"),a.reject(b)}}}]}}]).config(["$httpProvider",function(a){a.interceptors.push("myHttpInterceptor")}]),function(a){var b;a.fn.jqprint=function(c){b=a.extend({},a.fn.jqprint.defaults,c);var d=this instanceof jQuery?this:a(this);if(b.operaSupport&&a.browser.opera){var e=window.open("","jqPrint-preview");e.document.open();var f=e.document}else{var g=a("<iframe  />");b.debug||g.css({position:"absolute",width:"0px",height:"0px",left:"-600px",top:"-600px"}),g.appendTo("body");var f=g[0].contentWindow.document}b.importCSS&&(a("link[media=print]").length>0?a("link[media=print]").each(function(){f.write("<link type='text/css' rel='stylesheet' href='"+a(this).attr("href")+"' media='print' />")}):a("link").each(function(){f.write("<link type='text/css' rel='stylesheet' href='"+a(this).attr("href")+"' />")})),b.printContainer?f.write(d.outer()):d.each(function(){f.write(a(this).html())}),f.close(),(b.operaSupport&&a.browser.opera?e:g[0].contentWindow).focus(),setTimeout(function(){(b.operaSupport&&a.browser.opera?e:g[0].contentWindow).print(),e&&e.close()},1e3)},a.fn.jqprint.defaults={debug:!1,importCSS:!0,printContainer:!0,operaSupport:!1},jQuery.fn.outer=function(){return a(a("<div></div>").html(this.clone())).html()}}(jQuery),function(a){function b(a,b){this.websocket=new WebSocket(a);var c=this;b&&(b.onmessage&&(this.websocket.onmessage=function(a){b.onmessage(a,c.websocket)}),b.onopen&&(this.websocket.onopen=function(a){b.onopen(a,c.websocket)}),b.onerror&&(this.websocket.onerror=function(a){b.onerror(a,c.websocket)}),b.onclose&&(this.websocket.onclose=function(a){b.onclose(a,c.websocket)}))}b.prototype.close=function(a,b){this.websocket.close(a,b)},b.prototype.send=function(a){this.websocket.send(a)},a.extend({websocket:function(a,c){return new b(a,c)}})}(jQuery);var charBit=8,standardPadding=!1;String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},String.prototype.ltrim=function(){return this.replace(/(^\s*)/g,"")},String.prototype.rtrim=function(){return this.replace(/(\s*$)/g,"")};var Base=function(){};Base.extend=function(a,b){var c=Base.prototype.extend;Base._prototyping=!0;var d=new this;c.call(d,a),d.base=function(){},delete Base._prototyping;var e=d.constructor,f=d.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==f)this._constructing=!0,e.apply(this,arguments),delete this._constructing;else if(null!==arguments[0])return(arguments[0].extend||c).call(arguments[0],d)};return f.ancestor=this,f.extend=this.extend,f.forEach=this.forEach,f.implement=this.implement,f.prototype=d,f.toString=this.toString,f.valueOf=function(a){return"object"==a?f:e.valueOf()},c.call(f,b),"function"==typeof f.init&&f.init(),f},Base.prototype={extend:function(a,b){if(arguments.length>1){var c=this[a];if(c&&"function"==typeof b&&(!c.valueOf||c.valueOf()!=b.valueOf())&&/\bbase\b/.test(b)){var d=b.valueOf();b=function(){var a=this.base||Base.prototype.base;this.base=c;var b=d.apply(this,arguments);return this.base=a,b},b.valueOf=function(a){return"object"==a?b:d},b.toString=Base.toString}this[a]=b}else if(a){var e=Base.prototype.extend;Base._prototyping||"function"==typeof this||(e=this.extend||e);for(var f={toSource:null},g=["constructor","toString","valueOf"],h=Base._prototyping?0:1;i=g[h++];)a[i]!=f[i]&&e.call(this,i,a[i]);for(var i in a)f[i]||e.call(this,i,a[i])}return this}},Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(a,b,c){for(var d in a)void 0===this.prototype[d]&&b.call(c,a[d],d,a)},implement:function(){for(var a=0;a<arguments.length;a++)"function"==typeof arguments[a]?arguments[a](this.prototype):this.prototype.extend(arguments[a]);return this},toString:function(){return String(this.valueOf())}});var FlipClock;!function(a){FlipClock=function(a,b,c){return b instanceof Object&&b instanceof Date==!1&&(c=b,b=0),new FlipClock.Factory(a,b,c)},FlipClock.Lang={},FlipClock.Base=Base.extend({buildDate:"2014-12-12",version:"0.7.7",constructor:function(b,c){"object"!=typeof b&&(b={}),"object"!=typeof c&&(c={}),this.setOptions(a.extend(!0,{},b,c))},callback:function(a){if("function"==typeof a){for(var b=[],c=1;c<=arguments.length;c++)arguments[c]&&b.push(arguments[c]);a.apply(this,b)}},log:function(a){window.console&&console.log&&console.log(a)},getOption:function(a){return this[a]?this[a]:!1},getOptions:function(){return this},setOption:function(a,b){this[a]=b},setOptions:function(a){for(var b in a)"undefined"!=typeof a[b]&&this.setOption(b,a[b])}})}(jQuery),function(a){FlipClock.Face=FlipClock.Base.extend({autoStart:!0,dividers:[],factory:!1,lists:[],constructor:function(a,b){this.dividers=[],this.lists=[],this.base(b),this.factory=a},build:function(){this.autoStart&&this.start()},createDivider:function(b,c,d){"boolean"!=typeof c&&c||(d=c,c=b);var e=['<span class="'+this.factory.classes.dot+' top"></span>','<span class="'+this.factory.classes.dot+' bottom"></span>'].join("");d&&(e=""),b=this.factory.localize(b);var f=['<span class="'+this.factory.classes.divider+" "+(c?c:"").toLowerCase()+'">','<span class="'+this.factory.classes.label+'">'+(b?b:"")+"</span>",e,"</span>"],g=a(f.join(""));return this.dividers.push(g),g},createList:function(a,b){"object"==typeof a&&(b=a,a=0);var c=new FlipClock.List(this.factory,a,b);return this.lists.push(c),c},reset:function(){this.factory.time=new FlipClock.Time(this.factory,this.factory.original?Math.round(this.factory.original):0,{minimumDigits:this.factory.minimumDigits}),this.flip(this.factory.original,!1)},appendDigitToClock:function(a){a.$el.append(!1)},addDigit:function(a){var b=this.createList(a,{classes:{active:this.factory.classes.active,before:this.factory.classes.before,flip:this.factory.classes.flip}});this.appendDigitToClock(b)},start:function(){},stop:function(){},autoIncrement:function(){this.factory.countdown?this.decrement():this.increment()},increment:function(){this.factory.time.addSecond()},decrement:function(){0==this.factory.time.getTimeSeconds()?this.factory.stop():this.factory.time.subSecond()},flip:function(b,c){var d=this;a.each(b,function(a,b){var e=d.lists[a];e?(c||b==e.digit||e.play(),e.select(b)):d.addDigit(b)})}})}(jQuery),function(a){FlipClock.Factory=FlipClock.Base.extend({animationRate:1e3,autoStart:!0,callbacks:{destroy:!1,create:!1,init:!1,interval:!1,start:!1,stop:!1,reset:!1},classes:{active:"flip-clock-active",before:"flip-clock-before",divider:"flip-clock-divider",dot:"flip-clock-dot",label:"flip-clock-label",flip:"flip",play:"play",wrapper:"flip-clock-wrapper"},clockFace:"HourlyCounter",countdown:!1,defaultClockFace:"HourlyCounter",defaultLanguage:"english",$el:!1,face:!0,lang:!1,language:"english",minimumDigits:0,original:!1,running:!1,time:!1,timer:!1,$wrapper:!1,constructor:function(b,c,d){d||(d={}),this.lists=[],this.running=!1,this.base(d),this.$el=a(b).addClass(this.classes.wrapper),this.$wrapper=this.$el,this.original=c instanceof Date?c:c?Math.round(c):0,this.time=new FlipClock.Time(this,this.original,{minimumDigits:this.minimumDigits,animationRate:this.animationRate}),this.timer=new FlipClock.Timer(this,d),this.loadLanguage(this.language),this.loadClockFace(this.clockFace,d),this.autoStart&&this.start()},loadClockFace:function(a,b){var c,d="Face",e=!1;return a=a.ucfirst()+d,this.face.stop&&(this.stop(),e=!0),this.$el.html(""),this.time.minimumDigits=this.minimumDigits,c=FlipClock[a]?new FlipClock[a](this,b):new FlipClock[this.defaultClockFace+d](this,b),c.build(),this.face=c,e&&this.start(),this.face},loadLanguage:function(a){var b;return b=FlipClock.Lang[a.ucfirst()]?FlipClock.Lang[a.ucfirst()]:FlipClock.Lang[a]?FlipClock.Lang[a]:FlipClock.Lang[this.defaultLanguage],this.lang=b},localize:function(a,b){var c=this.lang;if(!a)return null;var d=a.toLowerCase();return"object"==typeof b&&(c=b),c&&c[d]?c[d]:a},start:function(a){var b=this;b.running||b.countdown&&!(b.countdown&&b.time.time>0)?b.log("Trying to start timer when countdown already at 0"):(b.face.start(b.time),b.timer.start(function(){b.flip(),"function"==typeof a&&a()}))},stop:function(a){this.face.stop(),this.timer.stop(a);for(var b in this.lists)this.lists.hasOwnProperty(b)&&this.lists[b].stop()},reset:function(a){this.timer.reset(a),this.face.reset()},setTime:function(a){this.time.time=a,this.flip(!0)},getTime:function(a){return this.time},setCountdown:function(a){var b=this.running;this.countdown=!!a,b&&(this.stop(),this.start())},flip:function(a){this.face.flip(!1,a)}})}(jQuery),function(a){FlipClock.List=FlipClock.Base.extend({digit:0,classes:{active:"flip-clock-active",before:"flip-clock-before",flip:"flip"},factory:!1,$el:!1,$obj:!1,items:[],lastDigit:0,constructor:function(a,b,c){this.factory=a,this.digit=b,this.lastDigit=b,this.$el=this.createList(),this.$obj=this.$el,b>0&&this.select(b),this.factory.$el.append(this.$el)},select:function(a){if("undefined"==typeof a?a=this.digit:this.digit=a,this.digit!=this.lastDigit){var b=this.$el.find("."+this.classes.before).removeClass(this.classes.before);this.$el.find("."+this.classes.active).removeClass(this.classes.active).addClass(this.classes.before),this.appendListItem(this.classes.active,this.digit),b.remove(),this.lastDigit=this.digit}},play:function(){this.$el.addClass(this.factory.classes.play)},stop:function(){var a=this;setTimeout(function(){a.$el.removeClass(a.factory.classes.play)},this.factory.timer.interval)},createListItem:function(a,b){return['<li class="'+(a?a:"")+'">','<a href="#">','<div class="up">','<div class="shadow"></div>','<div class="inn">'+(b?b:"")+"</div>","</div>",'<div class="down">','<div class="shadow"></div>','<div class="inn">'+(b?b:"")+"</div>","</div>","</a>","</li>"].join("")},appendListItem:function(a,b){var c=this.createListItem(a,b);this.$el.append(c)},createList:function(){var b=this.getPrevDigit()?this.getPrevDigit():this.digit,c=a(['<ul class="'+this.classes.flip+" "+(this.factory.running?this.factory.classes.play:"")+'">',this.createListItem(this.classes.before,b),this.createListItem(this.classes.active,this.digit),"</ul>"].join(""));return c},getNextDigit:function(){return 9==this.digit?0:this.digit+1},getPrevDigit:function(){return 0==this.digit?9:this.digit-1}})}(jQuery),function(a){String.prototype.ucfirst=function(){return this.substr(0,1).toUpperCase()+this.substr(1)},a.fn.FlipClock=function(b,c){return new FlipClock(a(this),b,c)},a.fn.flipClock=function(b,c){return a.fn.FlipClock(b,c)}}(jQuery),function(a){FlipClock.Time=FlipClock.Base.extend({time:0,factory:!1,minimumDigits:0,constructor:function(a,b,c){"object"!=typeof c&&(c={}),c.minimumDigits||(c.minimumDigits=a.minimumDigits),this.base(c),this.factory=a,b&&(this.time=b)},convertDigitsToArray:function(a){var b=[];a=a.toString();for(var c=0;c<a.length;c++)a[c].match(/^\d*$/g)&&b.push(a[c]);return b},digit:function(a){var b=this.toString(),c=b.length;return b[c-a]?b[c-a]:!1},digitize:function(b){var c=[];if(a.each(b,function(a,b){b=b.toString(),1==b.length&&(b="0"+b);for(var d=0;d<b.length;d++)c.push(b.charAt(d))}),c.length>this.minimumDigits&&(this.minimumDigits=c.length),this.minimumDigits>c.length)for(var d=c.length;d<this.minimumDigits;d++)c.unshift("0");return c},getDateObject:function(){return this.time instanceof Date?this.time:new Date((new Date).getTime()+1e3*this.getTimeSeconds())},getDayCounter:function(a){var b=[this.getDays(),this.getHours(!0),this.getMinutes(!0)];return a&&b.push(this.getSeconds(!0)),this.digitize(b)},getDays:function(a){var b=this.getTimeSeconds()/60/60/24;return a&&(b%=7),Math.floor(b)},getHourCounter:function(){var a=this.digitize([this.getHours(),this.getMinutes(!0),this.getSeconds(!0)]);return a},getHourly:function(){return this.getHourCounter()},getHours:function(a){var b=this.getTimeSeconds()/60/60;return a&&(b%=24),Math.floor(b)},getMilitaryTime:function(a,b){"undefined"==typeof b&&(b=!0),a||(a=this.getDateObject());var c=[a.getHours(),a.getMinutes()];return b===!0&&c.push(a.getSeconds()),this.digitize(c)},getMinutes:function(a){var b=this.getTimeSeconds()/60;return a&&(b%=60),Math.floor(b)},getMinuteCounter:function(){var a=this.digitize([this.getMinutes(),this.getSeconds(!0)]);return a},getTimeSeconds:function(a){return a||(a=new Date),this.time instanceof Date?this.factory.countdown?Math.max(this.time.getTime()/1e3-a.getTime()/1e3,0):a.getTime()/1e3-this.time.getTime()/1e3:this.time},getTime:function(a,b){"undefined"==typeof b&&(b=!0),a||(a=this.getDateObject());var c=a.getHours(),d=[c>12?c-12:0===c?12:c,a.getMinutes()];return b===!0&&d.push(a.getSeconds()),this.digitize(d)},getSeconds:function(a){var b=this.getTimeSeconds();return a&&(60==b?b=0:b%=60),Math.ceil(b)},getWeeks:function(a){var b=this.getTimeSeconds()/60/60/24/7;return a&&(b%=52),Math.floor(b)},removeLeadingZeros:function(b,c){var d=0,e=[];return a.each(c,function(a,f){b>a?d+=parseInt(c[a],10):e.push(c[a])}),0===d?e:c},addSeconds:function(a){this.time instanceof Date?this.time.setSeconds(this.time.getSeconds()+a):this.time+=a},addSecond:function(){this.addSeconds(1)},subSeconds:function(a){this.time instanceof Date?this.time.setSeconds(this.time.getSeconds()-a):this.time-=a},subSecond:function(){this.subSeconds(1)},toString:function(){return this.getTimeSeconds().toString()}})}(jQuery),function(a){FlipClock.Timer=FlipClock.Base.extend({callbacks:{destroy:!1,create:!1,init:!1,interval:!1,start:!1,stop:!1,reset:!1},count:0,factory:!1,interval:1e3,animationRate:1e3,constructor:function(a,b){this.base(b),this.factory=a,this.callback(this.callbacks.init),this.callback(this.callbacks.create)},getElapsed:function(){return this.count*this.interval},getElapsedTime:function(){return new Date(this.time+this.getElapsed())},reset:function(a){clearInterval(this.timer),this.count=0,this._setInterval(a),this.callback(this.callbacks.reset)},start:function(a){this.factory.running=!0,this._createTimer(a),this.callback(this.callbacks.start)},stop:function(a){this.factory.running=!1,this._clearInterval(a),this.callback(this.callbacks.stop),this.callback(a)},_clearInterval:function(){clearInterval(this.timer)},_createTimer:function(a){this._setInterval(a)},_destroyTimer:function(a){this._clearInterval(),this.timer=!1,this.callback(a),this.callback(this.callbacks.destroy)},_interval:function(a){this.callback(this.callbacks.interval),this.callback(a),this.count++},_setInterval:function(a){var b=this;b._interval(a),b.timer=setInterval(function(){b._interval(a)},this.interval)}})}(jQuery),function(a){FlipClock.TwentyFourHourClockFace=FlipClock.Face.extend({constructor:function(a,b){this.base(a,b)},build:function(b){var c=this,d=this.factory.$el.find("ul");this.factory.time.time||(this.factory.original=new Date,this.factory.time=new FlipClock.Time(this.factory,this.factory.original));var b=b?b:this.factory.time.getMilitaryTime(!1,this.showSeconds);b.length>d.length&&a.each(b,function(a,b){c.createList(b)}),this.createDivider(),this.createDivider(),a(this.dividers[0]).insertBefore(this.lists[this.lists.length-2].$el),a(this.dividers[1]).insertBefore(this.lists[this.lists.length-4].$el),this.base()},flip:function(a,b){this.autoIncrement(),a=a?a:this.factory.time.getMilitaryTime(!1,this.showSeconds),this.base(a,b)}})}(jQuery),function(a){FlipClock.CounterFace=FlipClock.Face.extend({shouldAutoIncrement:!1,constructor:function(a,b){"object"!=typeof b&&(b={}),a.autoStart=!!b.autoStart,b.autoStart&&(this.shouldAutoIncrement=!0),a.increment=function(){a.countdown=!1,a.setTime(a.getTime().getTimeSeconds()+1)},a.decrement=function(){a.countdown=!0;var b=a.getTime().getTimeSeconds();b>0&&a.setTime(b-1)},a.setValue=function(b){a.setTime(b)},a.setCounter=function(b){a.setTime(b)},this.base(a,b)},build:function(){var b=this,c=this.factory.$el.find("ul"),d=this.factory.getTime().digitize([this.factory.getTime().time]);d.length>c.length&&a.each(d,function(a,c){var d=b.createList(c);d.select(c)}),a.each(this.lists,function(a,b){b.play()}),this.base()},flip:function(a,b){this.shouldAutoIncrement&&this.autoIncrement(),a||(a=this.factory.getTime().digitize([this.factory.getTime().time])),this.base(a,b)},reset:function(){this.factory.time=new FlipClock.Time(this.factory,this.factory.original?Math.round(this.factory.original):0),this.flip()}})}(jQuery),function(a){FlipClock.DailyCounterFace=FlipClock.Face.extend({showSeconds:!0,constructor:function(a,b){this.base(a,b)},build:function(b){var c=this,d=this.factory.$el.find("ul"),e=0;b=b?b:this.factory.time.getDayCounter(this.showSeconds),b.length>d.length&&a.each(b,function(a,b){c.createList(b)}),this.showSeconds?a(this.createDivider("Seconds")).insertBefore(this.lists[this.lists.length-2].$el):e=2,a(this.createDivider("Minutes")).insertBefore(this.lists[this.lists.length-4+e].$el),a(this.createDivider("Hours")).insertBefore(this.lists[this.lists.length-6+e].$el),a(this.createDivider("Days",!0)).insertBefore(this.lists[0].$el),this.base()},flip:function(a,b){a||(a=this.factory.time.getDayCounter(this.showSeconds)),this.autoIncrement(),this.base(a,b)}})}(jQuery),function(a){FlipClock.HourlyCounterFace=FlipClock.Face.extend({constructor:function(a,b){this.base(a,b)},build:function(b,c){var d=this,e=this.factory.$el.find("ul");c=c?c:this.factory.time.getHourCounter(),c.length>e.length&&a.each(c,function(a,b){d.createList(b)}),a(this.createDivider("Seconds")).insertBefore(this.lists[this.lists.length-2].$el),a(this.createDivider("Minutes")).insertBefore(this.lists[this.lists.length-4].$el),b||a(this.createDivider("Hours",!0)).insertBefore(this.lists[0].$el),this.base()},flip:function(a,b){a||(a=this.factory.time.getHourCounter()),this.autoIncrement(),this.base(a,b)},appendDigitToClock:function(a){this.base(a),this.dividers[0].insertAfter(this.dividers[0].next())}})}(jQuery),function(a){FlipClock.MinuteCounterFace=FlipClock.HourlyCounterFace.extend({clearExcessDigits:!1,constructor:function(a,b){this.base(a,b)},build:function(){this.base(!0,this.factory.time.getMinuteCounter())},flip:function(a,b){a||(a=this.factory.time.getMinuteCounter()),this.base(a,b)}})}(jQuery),function(a){FlipClock.TwelveHourClockFace=FlipClock.TwentyFourHourClockFace.extend({meridium:!1,meridiumText:"AM",build:function(){var b=this.factory.time.getTime(!1,this.showSeconds);this.base(b),this.meridiumText=this.getMeridium(),this.meridium=a(['<ul class="flip-clock-meridium">',"<li>",'<a href="#">'+this.meridiumText+"</a>","</li>","</ul>"].join("")),this.meridium.insertAfter(this.lists[this.lists.length-1].$el)},flip:function(a,b){this.meridiumText!=this.getMeridium()&&(this.meridiumText=this.getMeridium(),this.meridium.find("a").html(this.meridiumText)),this.base(this.factory.time.getTime(!1,this.showSeconds),b)},getMeridium:function(){return(new Date).getHours()>=12?"PM":"AM"},isPM:function(){return"PM"==this.getMeridium()},isAM:function(){return"AM"==this.getMeridium()}})}(jQuery),function(a){FlipClock.Lang.Arabic={years:"سنوات",months:"شهور",days:"أيام",hours:"ساعات",minutes:"دقائق",seconds:"ثواني"},FlipClock.Lang.ar=FlipClock.Lang.Arabic,FlipClock.Lang["ar-ar"]=FlipClock.Lang.Arabic,FlipClock.Lang.arabic=FlipClock.Lang.Arabic}(jQuery),function(a){FlipClock.Lang.Danish={years:"År",months:"Måneder",days:"Dage",hours:"Timer",minutes:"Minutter",seconds:"Sekunder"},FlipClock.Lang.da=FlipClock.Lang.Danish,FlipClock.Lang["da-dk"]=FlipClock.Lang.Danish,FlipClock.Lang.danish=FlipClock.Lang.Danish}(jQuery),function(a){FlipClock.Lang.German={years:"Jahre",months:"Monate",days:"Tage",hours:"Stunden",minutes:"Minuten",seconds:"Sekunden"},FlipClock.Lang.de=FlipClock.Lang.German,FlipClock.Lang["de-de"]=FlipClock.Lang.German,FlipClock.Lang.german=FlipClock.Lang.German}(jQuery),function(a){FlipClock.Lang.English={years:"Years",months:"Months",days:"Days",hours:"Hours",minutes:"Minutes",seconds:"Seconds"},FlipClock.Lang.en=FlipClock.Lang.English,FlipClock.Lang["en-us"]=FlipClock.Lang.English,FlipClock.Lang.english=FlipClock.Lang.English}(jQuery),function(a){FlipClock.Lang.Spanish={years:"A&#241;os",months:"Meses",days:"D&#205;as",hours:"Horas",minutes:"Minutos",seconds:"Segundo"},FlipClock.Lang.es=FlipClock.Lang.Spanish,FlipClock.Lang["es-es"]=FlipClock.Lang.Spanish,FlipClock.Lang.spanish=FlipClock.Lang.Spanish}(jQuery),function(a){FlipClock.Lang.Finnish={years:"Vuotta",months:"Kuukautta",days:"Päivää",hours:"Tuntia",minutes:"Minuuttia",seconds:"Sekuntia"},FlipClock.Lang.fi=FlipClock.Lang.Finnish,FlipClock.Lang["fi-fi"]=FlipClock.Lang.Finnish,FlipClock.Lang.finnish=FlipClock.Lang.Finnish}(jQuery),function(a){FlipClock.Lang.French={years:"Ans",months:"Mois",days:"Jours",hours:"Heures",minutes:"Minutes",seconds:"Secondes"},FlipClock.Lang.fr=FlipClock.Lang.French,FlipClock.Lang["fr-ca"]=FlipClock.Lang.French,FlipClock.Lang.french=FlipClock.Lang.French}(jQuery),function(a){FlipClock.Lang.Italian={years:"Anni",months:"Mesi",days:"Giorni",hours:"Ore",minutes:"Minuti",seconds:"Secondi"},FlipClock.Lang.it=FlipClock.Lang.Italian,FlipClock.Lang["it-it"]=FlipClock.Lang.Italian,FlipClock.Lang.italian=FlipClock.Lang.Italian}(jQuery),function(a){FlipClock.Lang.Latvian={years:"Gadi",months:"Mēneši",days:"Dienas",hours:"Stundas",minutes:"Minūtes",seconds:"Sekundes"},FlipClock.Lang.lv=FlipClock.Lang.Latvian,FlipClock.Lang["lv-lv"]=FlipClock.Lang.Latvian,FlipClock.Lang.latvian=FlipClock.Lang.Latvian}(jQuery),function(a){FlipClock.Lang.Dutch={years:"Jaren",months:"Maanden",days:"Dagen",hours:"Uren",minutes:"Minuten",seconds:"Seconden"},FlipClock.Lang.nl=FlipClock.Lang.Dutch,FlipClock.Lang["nl-be"]=FlipClock.Lang.Dutch,FlipClock.Lang.dutch=FlipClock.Lang.Dutch}(jQuery),function(a){FlipClock.Lang.Norwegian={years:"År",months:"Måneder",days:"Dager",hours:"Timer",minutes:"Minutter",seconds:"Sekunder"},FlipClock.Lang.no=FlipClock.Lang.Norwegian,FlipClock.Lang.nb=FlipClock.Lang.Norwegian,FlipClock.Lang["no-nb"]=FlipClock.Lang.Norwegian,FlipClock.Lang.norwegian=FlipClock.Lang.Norwegian}(jQuery),function(a){FlipClock.Lang.Portuguese={years:"Anos",months:"Meses",days:"Dias",hours:"Horas",minutes:"Minutos",seconds:"Segundos"},FlipClock.Lang.pt=FlipClock.Lang.Portuguese,FlipClock.Lang["pt-br"]=FlipClock.Lang.Portuguese,FlipClock.Lang.portuguese=FlipClock.Lang.Portuguese}(jQuery),function(a){FlipClock.Lang.Russian={years:"лет",months:"месяцев",days:"дней",hours:"часов",minutes:"минут",seconds:"секунд"},FlipClock.Lang.ru=FlipClock.Lang.Russian,FlipClock.Lang["ru-ru"]=FlipClock.Lang.Russian,FlipClock.Lang.russian=FlipClock.Lang.Russian}(jQuery),function(a){FlipClock.Lang.Swedish={years:"År",months:"Månader",days:"Dagar",hours:"Timmar",minutes:"Minuter",seconds:"Sekunder"},FlipClock.Lang.sv=FlipClock.Lang.Swedish,FlipClock.Lang["sv-se"]=FlipClock.Lang.Swedish,FlipClock.Lang.swedish=FlipClock.Lang.Swedish}(jQuery),function(a){FlipClock.Lang.Chinese={years:"年",months:"月",days:"日",hours:"时",minutes:"分",seconds:"秒"},FlipClock.Lang.None={years:" ",months:" ",days:" ",hours:" ",minutes:" ",seconds:" "},
FlipClock.Lang.zh=FlipClock.Lang.Chinese,FlipClock.Lang["zh-cn"]=FlipClock.Lang.Chinese,FlipClock.Lang.chinese=FlipClock.Lang.Chinese,FlipClock.Lang.none=FlipClock.Lang.None}(jQuery),angular.module("uv.directive.clock",[]).directive("uvClock",["$timeout",function(a){return{restrict:"EA",replace:!0,transclude:!0,scope:{uvClockTimestamp:"@",uvClockCountdown:"@",uvClockFace:"@",uvClockStopCallback:"&",uvClockAutoStart:"@",uvClockShowText:"@"},link:function(a,b,c){var d={clockFace:a.uvClockFace||"TwentyFourHourClock",autoStart:a.uvClockAutoStart&&!0||!1,countdown:a.uvClockCountdown&&!0||!1,language:a.uvClockShowText&&"zh"||"none",callbacks:{stop:function(){console.log("uvClock stoped will callback:"+a.uvClockStopCallback),a.uvClockStopCallback&&a.uvClockStopCallback()},onInterval:function(){}}},e=b.FlipClock(d);if(!a.uvClockAutoStart)var f=a.$watch("uvClockTimestamp",function(b){if(b&&parseInt(b)>0){console.log("begin clock");var c=a.uvClockTimestamp;e.setTime(c),e.start(),f()}else console.log("uvClock:uv-clock-timestamp:"+a.uvClockTimestamp+",不满足开启时钟条件")})}}}]),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){var b=a(window),c=a(document),d=!0,e=!1,f=null,g=NaN,h=1/0,i="undefined",j="directive",k=".cropper",l=/^(e|n|w|s|ne|nw|sw|se|all|crop|move|zoom)$/,m=/^(x|y|width|height)$/,n=/^(naturalWidth|naturalHeight|width|height|aspectRatio|ratio)$/,o="cropper-modal",p="cropper-hidden",q="cropper-invisible",r="cropper-move",s="cropper-crop",t="cropper-disabled",u="mousedown touchstart",v="mousemove touchmove",w="mouseup mouseleave touchend touchleave touchcancel",x="wheel mousewheel DOMMouseScroll",y="resize"+k,z="dblclick",A="build"+k,B="built"+k,C="dragstart"+k,D="dragmove"+k,E="dragend"+k,F=function(a){return"number"==typeof a},G=function(b,c){this.element=b,this.$element=a(b),this.defaults=a.extend({},G.DEFAULTS,a.isPlainObject(c)?c:{}),this.$original=f,this.ready=e,this.built=e,this.cropped=e,this.rotated=e,this.disabled=e,this.replaced=e,this.init()},H=Math.round,I=Math.sqrt,J=Math.min,K=Math.max,L=Math.abs,M=Math.sin,N=Math.cos,O=parseFloat;G.prototype={constructor:G,support:{canvas:a.isFunction(a("<canvas>")[0].getContext)},init:function(){var b=this.defaults;a.each(b,function(a,c){switch(a){case"aspectRatio":b[a]=L(O(c))||g;break;case"minWidth":case"minHeight":b[a]=L(O(c))||0;break;case"maxWidth":case"maxHeight":b[a]=L(O(c))||h}}),this.image={rotate:0},this.load()},load:function(){var b,c,f=this,g=this.$element,h=this.element,i=this.image;g.is("img")?c=g.attr("src"):g.is("canvas")&&this.support.canvas&&(c=h.toDataURL()),c&&(this.$clone&&this.$clone.remove(),this.replaced&&(this.replaced=e,i.rotate=0),this.$clone=b=a('<img src="'+c+'">'),b.one("load",function(){i.naturalWidth=this.naturalWidth||b.width(),i.naturalHeight=this.naturalHeight||b.height(),i.aspectRatio=i.naturalWidth/i.naturalHeight,f.url=c,f.ready=d,f.build()}),b.addClass(q).prependTo("body"))},build:function(){var b,e,f=this.$element,g=this.defaults;this.ready&&(this.built&&this.unbuild(),f.one(A,g.build),b=a.Event(A),f.trigger(b),b.isDefaultPrevented()||(this.$cropper=e=a(G.TEMPLATE),f.addClass(p),this.$clone.removeClass(q).prependTo(e),this.rotated||(this.$original=this.$clone.clone(),this.originalImage=a.extend({},this.image)),this.$container=f.parent(),this.$container.append(e),this.$canvas=e.find(".cropper-canvas"),this.$dragger=e.find(".cropper-dragger"),this.$viewer=e.find(".cropper-viewer"),g.autoCrop?this.cropped=d:this.$dragger.addClass(p),g.dragCrop&&this.setDragMode("crop"),g.modal&&this.$canvas.addClass(o),!g.dashed&&this.$dragger.find(".cropper-dashed").addClass(p),!g.movable&&this.$dragger.find(".cropper-face").addClass(p),!g.resizable&&this.$dragger.find(".cropper-line, .cropper-point").addClass(p),this.$scope=g.multiple?this.$cropper:c,this.addListeners(),this.initPreview(),this.built=d,this.update(),f.one(B,g.built),f.trigger(B)))},unbuild:function(){this.built&&(this.built=e,this.removeListeners(),this.$preview.empty(),this.$preview=f,this.$dragger=f,this.$canvas=f,this.$container=f,this.$cropper.remove(),this.$cropper=f)},update:function(a){this.initContainer(),this.initCropper(),this.initImage(),this.initDragger(),a?(this.setData(a,d),this.setDragMode("crop")):this.setData(this.defaults.data)},resize:function(){clearTimeout(this.resizing),this.resizing=setTimeout(a.proxy(this.update,this,this.getData()),200)},preview:function(){var b=this.image,c=this.dragger,d=b.width,e=b.height,f=c.left-b.left,g=c.top-b.top;this.$viewer.find("img").css({width:H(d),height:H(e),marginLeft:-H(f),marginTop:-H(g)}),this.$preview.each(function(){var b=a(this),h=b.width()/c.width;b.find("img").css({width:H(d*h),height:H(e*h),marginLeft:-H(f*h),marginTop:-H(g*h)})})},addListeners:function(){var c=this.defaults;this.$element.on(C,c.dragstart).on(D,c.dragmove).on(E,c.dragend),this.$cropper.on(u,this._dragstart=a.proxy(this.dragstart,this)).on(z,this._dblclick=a.proxy(this.dblclick,this)),c.zoomable&&this.$cropper.on(x,this._wheel=a.proxy(this.wheel,this)),this.$scope.on(v,this._dragmove=a.proxy(this.dragmove,this)).on(w,this._dragend=a.proxy(this.dragend,this)),b.on(y,this._resize=a.proxy(this.resize,this))},removeListeners:function(){var a=this.defaults;this.$element.off(C,a.dragstart).off(D,a.dragmove).off(E,a.dragend),this.$cropper.off(u,this._dragstart).off(z,this._dblclick),a.zoomable&&this.$cropper.off(x,this._wheel),this.$scope.off(v,this._dragmove).off(w,this._dragend),b.off(y,this._resize)},initPreview:function(){var b='<img src="'+this.url+'">';this.$preview=a(this.defaults.preview),this.$preview.html(b),this.$viewer.html(b)},initContainer:function(){var a=this.$container;this.container={width:K(a.width(),300),height:K(a.height(),150)}},initCropper:function(){var a,b=this.container,c=this.image;c.naturalWidth*b.height/c.naturalHeight-b.width>=0?(a={width:b.width,height:b.width/c.aspectRatio,left:0},a.top=(b.height-a.height)/2):(a={width:b.height*c.aspectRatio,height:b.height,top:0},a.left=(b.width-a.width)/2),this.$cropper.css({width:H(a.width),height:H(a.height),left:H(a.left),top:H(a.top)}),this.cropper=a},initImage:function(){var b=this.image,c=this.cropper,d={_width:c.width,_height:c.height,width:c.width,height:c.height,left:0,top:0,ratio:c.width/b.naturalWidth};this.defaultImage=a.extend({},b,d),b._width!==c.width||b._height!==c.height?a.extend(b,d):b=a.extend(d,b),this.image=b,this.renderImage()},renderImage:function(a){var b=this.image;"zoom"===a&&(b.left-=(b.width-b.oldWidth)/2,b.top-=(b.height-b.oldHeight)/2),b.left=J(K(b.left,b._width-b.width),0),b.top=J(K(b.top,b._height-b.height),0),this.$clone.css({width:H(b.width),height:H(b.height),marginLeft:H(b.left),marginTop:H(b.top)}),a&&(this.defaults.done(this.getData()),this.preview())},initDragger:function(){var b,c=this.defaults,d=this.cropper,e=c.aspectRatio||this.image.aspectRatio,f=this.image.ratio;b=d.height*e-d.width>=0?{height:d.width/e,width:d.width,left:0,top:(d.height-d.width/e)/2,maxWidth:d.width,maxHeight:d.width/e}:{height:d.height,width:d.height*e,left:(d.width-d.height*e)/2,top:0,maxWidth:d.height*e,maxHeight:d.height},b.minWidth=0,b.minHeight=0,c.aspectRatio?(isFinite(c.maxWidth)?(b.maxWidth=J(b.maxWidth,c.maxWidth*f),b.maxHeight=b.maxWidth/e):isFinite(c.maxHeight)&&(b.maxHeight=J(b.maxHeight,c.maxHeight*f),b.maxWidth=b.maxHeight*e),c.minWidth>0?(b.minWidth=K(0,c.minWidth*f),b.minHeight=b.minWidth/e):c.minHeight>0&&(b.minHeight=K(0,c.minHeight*f),b.minWidth=b.minHeight*e)):(b.maxWidth=J(b.maxWidth,c.maxWidth*f),b.maxHeight=J(b.maxHeight,c.maxHeight*f),b.minWidth=K(0,c.minWidth*f),b.minHeight=K(0,c.minHeight*f)),b.minWidth=J(b.maxWidth,b.minWidth),b.minHeight=J(b.maxHeight,b.minHeight),b.height*=.8,b.width*=.8,b.left=(d.width-b.width)/2,b.top=(d.height-b.height)/2,b.oldLeft=b.left,b.oldTop=b.top,this.defaultDragger=b,this.dragger=a.extend({},b)},renderDragger:function(){var a=this.dragger,b=this.cropper;a.width>a.maxWidth?(a.width=a.maxWidth,a.left=a.oldLeft):a.width<a.minWidth&&(a.width=a.minWidth,a.left=a.oldLeft),a.height>a.maxHeight?(a.height=a.maxHeight,a.top=a.oldTop):a.height<a.minHeight&&(a.height=a.minHeight,a.top=a.oldTop),a.left=J(K(a.left,0),b.width-a.width),a.top=J(K(a.top,0),b.height-a.height),a.oldLeft=a.left,a.oldTop=a.top,this.dragger=a,this.defaults.done(this.getData()),this.$dragger.css({width:H(a.width),height:H(a.height),left:H(a.left),top:H(a.top)}),this.preview()},reset:function(b){this.cropped&&(b&&(this.defaults.data={}),this.image=a.extend({},this.defaultImage),this.renderImage(),this.dragger=a.extend({},this.defaultDragger),this.setData(this.defaults.data))},clear:function(){this.cropped&&(this.cropped=e,this.setData({x:0,y:0,width:0,height:0}),this.$canvas.removeClass(o),this.$dragger.addClass(p))},destroy:function(){var a=this.$element;this.ready&&(this.unbuild(),a.removeClass(p).removeData("cropper"),this.rotated&&a.replaceWith(this.$original))},replace:function(b,c){var f,g=this,h=this.$element,i=this.element;b&&b!==this.url&&(c||(this.rotated=e,this.replaced=d),h.is("img")?(h.attr("src",b),this.load()):h.is("canvas")&&this.support.canvas&&(f=i.getContext("2d"),a('<img src="'+b+'">').one("load",function(){i.width=this.width,i.height=this.height,f.clearRect(0,0,i.width,i.height),f.drawImage(this,0,0),g.load()})))},setData:function(b,c){var d=this.cropper,e=this.dragger,g=this.image,h=this.defaults.aspectRatio;this.built&&typeof b!==i&&((b===f||a.isEmptyObject(b))&&(e=a.extend({},this.defaultDragger)),a.isPlainObject(b)&&!a.isEmptyObject(b)&&(c||(this.defaults.data=b),b=this.transformData(b),F(b.x)&&b.x<=d.width-g.left&&(e.left=b.x+g.left),F(b.y)&&b.y<=d.height-g.top&&(e.top=b.y+g.top),h?F(b.width)&&b.width<=e.maxWidth&&b.width>=e.minWidth?(e.width=b.width,e.height=e.width/h):F(b.height)&&b.height<=e.maxHeight&&b.height>=e.minHeight&&(e.height=b.height,e.width=e.height*h):(F(b.width)&&b.width<=e.maxWidth&&b.width>=e.minWidth&&(e.width=b.width),F(b.height)&&b.height<=e.maxHeight&&b.height>=e.minHeight&&(e.height=b.height))),this.dragger=e,this.renderDragger())},getData:function(){var a=this.dragger,b=this.image,c={};return this.built&&(c={x:a.left-b.left,y:a.top-b.top,width:a.width,height:a.height},c=this.transformData(c,d)),c},transformData:function(b,c){var d=this.image.ratio,e={};return a.each(b,function(a,b){b=O(b),m.test(a)&&!isNaN(b)&&(e[a]=c?H(b/d):b*d)}),e},setAspectRatio:function(a){var b="auto"===a;a=O(a),(b||!isNaN(a)&&a>0)&&(this.defaults.aspectRatio=b?g:a,this.built&&(this.initDragger(),this.renderDragger()))},getImageData:function(){var b={};return this.ready&&a.each(this.image,function(a,c){n.test(a)&&(b[a]=c)}),b},getDataURL:function(b,c){var d=a("<canvas>")[0],e=this.getData(),f="";return this.cropped&&this.support.canvas&&(d.width=e.width,d.height=e.height,d.getContext("2d").drawImage(this.$clone[0],e.x,e.y,e.width,e.height,0,0,e.width,e.height),f=d.toDataURL(b,c)),f},setDragMode:function(a){var b=this.$canvas,c=this.defaults,f=e,g=e;if(this.built&&!this.disabled){switch(a){case"crop":c.dragCrop&&(f=d,b.data(j,a));break;case"move":c.movable&&(g=d,b.data(j,a));break;default:b.removeData(j)}b.toggleClass(s,f).toggleClass(r,g)}},enable:function(){this.built&&(this.disabled=e,this.$cropper.removeClass(t))},disable:function(){this.built&&(this.disabled=d,this.$cropper.addClass(t))},rotate:function(a){var b=this.image;a=O(a)||0,this.built&&0!==a&&!this.disabled&&this.defaults.rotatable&&this.support.canvas&&(this.rotated=d,a=b.rotate=(b.rotate+a)%360,this.replace(this.getRotatedDataURL(a),!0))},getRotatedDataURL:function(b){var c=this.$original.clone(),d=a("<canvas>")[0],e=d.getContext("2d"),f=b*Math.PI/180,g=L(b)%180,h=g>90?180-g:g,i=h*Math.PI/180,j=this.originalImage,k=j.naturalWidth,l=j.naturalHeight,m=L(k*N(i)+l*M(i)),n=L(k*M(i)+l*N(i));return d.width=m,d.height=n,e.save(),e.translate(m/2,n/2),e.rotate(f),c.addClass(q).prependTo(this.$cropper),e.drawImage(c[0],-k/2,-l/2,k,l),e.restore(),d.toDataURL()},zoom:function(a){var b,c,d,e=this.image;a=O(a),this.built&&a&&!this.disabled&&this.defaults.zoomable&&(b=e.width*(1+a),c=e.height*(1+a),d=b/e._width,d>10||(1>d&&(b=e._width,c=e._height),1>=d?this.setDragMode("crop"):this.setDragMode("move"),e.oldWidth=e.width,e.oldHeight=e.height,e.width=b,e.height=c,e.ratio=e.width/e.naturalWidth,this.renderImage("zoom")))},dblclick:function(){this.disabled||(this.$canvas.hasClass(s)?this.setDragMode("move"):this.setDragMode("crop"))},wheel:function(a){var b,c=a.originalEvent,d=117.25,e=5,f=166.66665649414062,g=.1;this.disabled||(a.preventDefault(),c.deltaY?(b=c.deltaY,b=b%e===0?b/e:b%d===0?b/d:b/f):b=c.wheelDelta?-c.wheelDelta/120:c.detail?c.detail/3:0,this.zoom(b*g))},dragstart:function(b){var c,f,g,h=b.originalEvent.touches,i=b;if(!this.disabled){if(h){if(g=h.length,g>1){if(!this.defaults.zoomable||2!==g)return;i=h[1],this.startX2=i.pageX,this.startY2=i.pageY,c="zoom"}i=h[0]}if(c=c||a(i.target).data(j),l.test(c)){if(b.preventDefault(),f=a.Event(C),this.$element.trigger(f),f.isDefaultPrevented())return;this.directive=c,this.cropping=e,this.startX=i.pageX,this.startY=i.pageY,"crop"===c&&(this.cropping=d,this.$canvas.addClass(o))}}},dragmove:function(b){var c,d,e=b.originalEvent.touches,f=b;if(!this.disabled){if(e){if(d=e.length,d>1){if(!this.defaults.zoomable||2!==d)return;f=e[1],this.endX2=f.pageX,this.endY2=f.pageY}f=e[0]}if(this.directive){if(b.preventDefault(),c=a.Event(D),this.$element.trigger(c),c.isDefaultPrevented())return;this.endX=f.pageX,this.endY=f.pageY,this.dragging()}}},dragend:function(b){var c;if(!this.disabled&&this.directive){if(b.preventDefault(),c=a.Event(E),this.$element.trigger(c),c.isDefaultPrevented())return;this.cropping&&(this.cropping=e,this.$canvas.toggleClass(o,this.cropped&&this.defaults.modal)),this.directive=""}},dragging:function(){var a,b=this.directive,c=this.image,f=this.cropper,g=f.width,h=f.height,i=this.dragger,j=i.width,k=i.height,l=i.left,m=i.top,n=l+j,o=m+k,q=d,r=this.defaults,s=r.aspectRatio,t={x:this.endX-this.startX,y:this.endY-this.startY};switch(s&&(t.X=t.y*s,t.Y=t.x/s),b){case"all":l+=t.x,m+=t.y;break;case"e":if(t.x>=0&&(n>=g||s&&(0>=m||o>=h))){q=e;break}j+=t.x,s&&(k=j/s,m-=t.Y/2),0>j&&(b="w",j=0);break;case"n":if(t.y<=0&&(0>=m||s&&(0>=l||n>=g))){q=e;break}k-=t.y,m+=t.y,s&&(j=k*s,l+=t.X/2),0>k&&(b="s",k=0);break;case"w":if(t.x<=0&&(0>=l||s&&(0>=m||o>=h))){q=e;break}j-=t.x,l+=t.x,s&&(k=j/s,m+=t.Y/2),0>j&&(b="e",j=0);break;case"s":if(t.y>=0&&(o>=h||s&&(0>=l||n>=g))){q=e;break}k+=t.y,s&&(j=k*s,l-=t.X/2),0>k&&(b="n",k=0);break;case"ne":if(s){if(t.y<=0&&(0>=m||n>=g)){q=e;break}k-=t.y,m+=t.y,j=k*s}else t.x>=0?g>n?j+=t.x:t.y<=0&&0>=m&&(q=e):j+=t.x,t.y<=0?m>0&&(k-=t.y,m+=t.y):(k-=t.y,m+=t.y);0>k&&(b="sw",k=0,j=0);break;case"nw":if(s){if(t.y<=0&&(0>=m||0>=l)){q=e;break}k-=t.y,m+=t.y,j=k*s,l+=t.X}else t.x<=0?l>0?(j-=t.x,l+=t.x):t.y<=0&&0>=m&&(q=e):(j-=t.x,l+=t.x),t.y<=0?m>0&&(k-=t.y,m+=t.y):(k-=t.y,m+=t.y);0>k&&(b="se",k=0,j=0);break;case"sw":if(s){if(t.x<=0&&(0>=l||o>=h)){q=e;break}j-=t.x,l+=t.x,k=j/s}else t.x<=0?l>0?(j-=t.x,l+=t.x):t.y>=0&&o>=h&&(q=e):(j-=t.x,l+=t.x),t.y>=0?h>o&&(k+=t.y):k+=t.y;0>j&&(b="ne",k=0,j=0);break;case"se":if(s){if(t.x>=0&&(n>=g||o>=h)){q=e;break}j+=t.x,k=j/s}else t.x>=0?g>n?j+=t.x:t.y>=0&&o>=h&&(q=e):j+=t.x,t.y>=0?h>o&&(k+=t.y):k+=t.y;0>j&&(b="nw",k=0,j=0);break;case"move":c.left+=t.x,c.top+=t.y,this.renderImage("move"),q=e;break;case"zoom":r.zoomable&&(this.zoom(function(a,b,c,d,e,f){return(I(e*e+f*f)-I(c*c+d*d))/I(a*a+b*b)}(c.width,c.height,L(this.startX-this.startX2),L(this.startY-this.startY2),L(this.endX-this.endX2),L(this.endY-this.endY2))),this.endX2=this.startX2,this.endY2=this.startY2);break;case"crop":t.x&&t.y&&(a=this.$cropper.offset(),l=this.startX-a.left,m=this.startY-a.top,j=i.minWidth,k=i.minHeight,t.x>0?t.y>0?b="se":(b="ne",m-=k):t.y>0?(b="sw",l-=j):(b="nw",l-=j,m-=k),this.cropped||(this.cropped=d,this.$dragger.removeClass(p)))}q&&(i.width=j,i.height=k,i.left=l,i.top=m,this.directive=b,this.renderDragger()),this.startX=this.endX,this.startY=this.endY}},G.TEMPLATE=function(a,b){return b=b.split(","),a.replace(/\d+/g,function(a){return b[a]})}('<0 6="5-container"><0 6="5-canvas"></0><0 6="5-dragger"><1 6="5-viewer"></1><1 6="5-8 8-h"></1><1 6="5-8 8-v"></1><1 6="5-face" 3-2="all"></1><1 6="5-7 7-e" 3-2="e"></1><1 6="5-7 7-n" 3-2="n"></1><1 6="5-7 7-w" 3-2="w"></1><1 6="5-7 7-s" 3-2="s"></1><1 6="5-4 4-e" 3-2="e"></1><1 6="5-4 4-n" 3-2="n"></1><1 6="5-4 4-w" 3-2="w"></1><1 6="5-4 4-s" 3-2="s"></1><1 6="5-4 4-ne" 3-2="ne"></1><1 6="5-4 4-nw" 3-2="nw"></1><1 6="5-4 4-sw" 3-2="sw"></1><1 6="5-4 4-se" 3-2="se"></1></0></0>',"div,span,directive,data,point,cropper,class,line,dashed"),G.DEFAULTS={aspectRatio:"auto",data:{},done:a.noop,preview:"",multiple:e,autoCrop:d,dragCrop:d,dashed:d,modal:d,movable:d,resizable:d,zoomable:d,rotatable:d,minWidth:0,minHeight:0,maxWidth:h,maxHeight:h,build:f,built:f,dragstart:f,dragmove:f,dragend:f},G.setDefaults=function(b){a.extend(G.DEFAULTS,b)},G.other=a.fn.cropper,a.fn.cropper=function(b){var c,d=[].slice.call(arguments,1);return this.each(function(){var e,f=a(this),g=f.data("cropper");g||f.data("cropper",g=new G(this,b)),"string"==typeof b&&a.isFunction(e=g[b])&&(c=e.apply(g,d))}),typeof c!==i?c:this},a.fn.cropper.Constructor=G,a.fn.cropper.setDefaults=G.setDefaults,a.fn.cropper.noConflict=function(){return a.fn.cropper=G.other,this}}),!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){var b=a(window),c=a(document),d=!0,e=!1,f=null,g=NaN,h=1/0,i="undefined",j="directive",k=".cropper",l=/^(e|n|w|s|ne|nw|sw|se|all|crop|move|zoom)$/,m=/^(x|y|width|height)$/,n=/^(naturalWidth|naturalHeight|width|height|aspectRatio|ratio)$/,o="cropper-modal",p="cropper-hidden",q="cropper-invisible",r="cropper-move",s="cropper-crop",t="cropper-disabled",u="mousedown touchstart",v="mousemove touchmove",w="mouseup mouseleave touchend touchleave touchcancel",x="wheel mousewheel DOMMouseScroll",y="resize"+k,z="dblclick",A="build"+k,B="built"+k,C="dragstart"+k,D="dragmove"+k,E="dragend"+k,F=function(a){return"number"==typeof a},G=function(b,c){this.element=b,this.$element=a(b),this.defaults=a.extend({},G.DEFAULTS,a.isPlainObject(c)?c:{}),this.$original=f,this.ready=e,this.built=e,this.cropped=e,this.rotated=e,this.disabled=e,this.replaced=e,this.init()},H=Math.round,I=Math.sqrt,J=Math.min,K=Math.max,L=Math.abs,M=Math.sin,N=Math.cos,O=parseFloat;G.prototype={constructor:G,support:{canvas:a.isFunction(a("<canvas>")[0].getContext)},init:function(){var b=this.defaults;a.each(b,function(a,c){switch(a){case"aspectRatio":b[a]=L(O(c))||g;break;case"minWidth":case"minHeight":b[a]=L(O(c))||0;break;case"maxWidth":case"maxHeight":b[a]=L(O(c))||h}}),this.image={rotate:0},this.load()},load:function(){var b,c,f=this,g=this.$element,h=this.element,i=this.image;g.is("img")?c=g.attr("src"):g.is("canvas")&&this.support.canvas&&(c=h.toDataURL()),c&&(this.$clone&&this.$clone.remove(),this.replaced&&(this.replaced=e,i.rotate=0),this.$clone=b=a('<img src="'+c+'">'),b.one("load",function(){i.naturalWidth=this.naturalWidth||b.width(),i.naturalHeight=this.naturalHeight||b.height(),i.aspectRatio=i.naturalWidth/i.naturalHeight,f.url=c,f.ready=d,f.build()}),b.addClass(q).prependTo("body"))},build:function(){var b,e,f=this.$element,g=this.defaults;this.ready&&(this.built&&this.unbuild(),f.one(A,g.build),b=a.Event(A),f.trigger(b),b.isDefaultPrevented()||(this.$cropper=e=a(G.TEMPLATE),f.addClass(p),this.$clone.removeClass(q).prependTo(e),this.rotated||(this.$original=this.$clone.clone(),this.originalImage=a.extend({},this.image)),this.$container=f.parent(),this.$container.append(e),this.$canvas=e.find(".cropper-canvas"),this.$dragger=e.find(".cropper-dragger"),this.$viewer=e.find(".cropper-viewer"),g.autoCrop?this.cropped=d:this.$dragger.addClass(p),g.dragCrop&&this.setDragMode("crop"),g.modal&&this.$canvas.addClass(o),!g.dashed&&this.$dragger.find(".cropper-dashed").addClass(p),!g.movable&&this.$dragger.find(".cropper-face").addClass(p),!g.resizable&&this.$dragger.find(".cropper-line, .cropper-point").addClass(p),this.$scope=g.multiple?this.$cropper:c,this.addListeners(),this.initPreview(),this.built=d,this.update(),f.one(B,g.built),f.trigger(B)))},unbuild:function(){this.built&&(this.built=e,this.removeListeners(),this.$preview.empty(),this.$preview=f,this.$dragger=f,this.$canvas=f,this.$container=f,this.$cropper.remove(),this.$cropper=f)},update:function(a){this.initContainer(),this.initCropper(),this.initImage(),this.initDragger(),a?(this.setData(a,d),this.setDragMode("crop")):this.setData(this.defaults.data)},resize:function(){clearTimeout(this.resizing),this.resizing=setTimeout(a.proxy(this.update,this,this.getData()),200)},preview:function(){var b=this.image,c=this.dragger,d=b.width,e=b.height,f=c.left-b.left,g=c.top-b.top;this.$viewer.find("img").css({width:H(d),height:H(e),marginLeft:-H(f),marginTop:-H(g)}),this.$preview.each(function(){var b=a(this),h=b.width()/c.width;b.find("img").css({width:H(d*h),height:H(e*h),marginLeft:-H(f*h),marginTop:-H(g*h)})})},addListeners:function(){var c=this.defaults;this.$element.on(C,c.dragstart).on(D,c.dragmove).on(E,c.dragend),this.$cropper.on(u,this._dragstart=a.proxy(this.dragstart,this)).on(z,this._dblclick=a.proxy(this.dblclick,this)),c.zoomable&&this.$cropper.on(x,this._wheel=a.proxy(this.wheel,this)),this.$scope.on(v,this._dragmove=a.proxy(this.dragmove,this)).on(w,this._dragend=a.proxy(this.dragend,this)),b.on(y,this._resize=a.proxy(this.resize,this))},removeListeners:function(){var a=this.defaults;this.$element.off(C,a.dragstart).off(D,a.dragmove).off(E,a.dragend),this.$cropper.off(u,this._dragstart).off(z,this._dblclick),a.zoomable&&this.$cropper.off(x,this._wheel),this.$scope.off(v,this._dragmove).off(w,this._dragend),b.off(y,this._resize)},initPreview:function(){var b='<img src="'+this.url+'">';this.$preview=a(this.defaults.preview),this.$preview.html(b),this.$viewer.html(b)},initContainer:function(){var a=this.$container;this.container={width:K(a.width(),300),height:K(a.height(),150)}},initCropper:function(){var a,b=this.container,c=this.image;c.naturalWidth*b.height/c.naturalHeight-b.width>=0?(a={width:b.width,height:b.width/c.aspectRatio,left:0},a.top=(b.height-a.height)/2):(a={width:b.height*c.aspectRatio,height:b.height,top:0},a.left=(b.width-a.width)/2),this.$cropper.css({width:H(a.width),height:H(a.height),left:H(a.left),top:H(a.top)}),this.cropper=a},initImage:function(){var b=this.image,c=this.cropper,d={_width:c.width,_height:c.height,width:c.width,height:c.height,left:0,top:0,ratio:c.width/b.naturalWidth};this.defaultImage=a.extend({},b,d),b._width!==c.width||b._height!==c.height?a.extend(b,d):b=a.extend(d,b),this.image=b,this.renderImage()},renderImage:function(a){var b=this.image;"zoom"===a&&(b.left-=(b.width-b.oldWidth)/2,b.top-=(b.height-b.oldHeight)/2),b.left=J(K(b.left,b._width-b.width),0),b.top=J(K(b.top,b._height-b.height),0),this.$clone.css({width:H(b.width),height:H(b.height),marginLeft:H(b.left),marginTop:H(b.top)}),a&&(this.defaults.done(this.getData()),this.preview())},initDragger:function(){var b,c=this.defaults,d=this.cropper,e=c.aspectRatio||this.image.aspectRatio,f=this.image.ratio;b=d.height*e-d.width>=0?{height:d.width/e,width:d.width,left:0,top:(d.height-d.width/e)/2,maxWidth:d.width,maxHeight:d.width/e}:{height:d.height,width:d.height*e,left:(d.width-d.height*e)/2,top:0,maxWidth:d.height*e,maxHeight:d.height},b.minWidth=0,b.minHeight=0,c.aspectRatio?(isFinite(c.maxWidth)?(b.maxWidth=J(b.maxWidth,c.maxWidth*f),b.maxHeight=b.maxWidth/e):isFinite(c.maxHeight)&&(b.maxHeight=J(b.maxHeight,c.maxHeight*f),b.maxWidth=b.maxHeight*e),c.minWidth>0?(b.minWidth=K(0,c.minWidth*f),b.minHeight=b.minWidth/e):c.minHeight>0&&(b.minHeight=K(0,c.minHeight*f),b.minWidth=b.minHeight*e)):(b.maxWidth=J(b.maxWidth,c.maxWidth*f),b.maxHeight=J(b.maxHeight,c.maxHeight*f),b.minWidth=K(0,c.minWidth*f),b.minHeight=K(0,c.minHeight*f)),b.minWidth=J(b.maxWidth,b.minWidth),b.minHeight=J(b.maxHeight,b.minHeight),b.height*=.8,b.width*=.8,b.left=(d.width-b.width)/2,b.top=(d.height-b.height)/2,b.oldLeft=b.left,b.oldTop=b.top,this.defaultDragger=b,this.dragger=a.extend({},b)},renderDragger:function(){var a=this.dragger,b=this.cropper;a.width>a.maxWidth?(a.width=a.maxWidth,a.left=a.oldLeft):a.width<a.minWidth&&(a.width=a.minWidth,a.left=a.oldLeft),a.height>a.maxHeight?(a.height=a.maxHeight,a.top=a.oldTop):a.height<a.minHeight&&(a.height=a.minHeight,a.top=a.oldTop),a.left=J(K(a.left,0),b.width-a.width),a.top=J(K(a.top,0),b.height-a.height),a.oldLeft=a.left,a.oldTop=a.top,this.dragger=a,this.defaults.done(this.getData()),this.$dragger.css({width:H(a.width),height:H(a.height),left:H(a.left),top:H(a.top)}),this.preview()},reset:function(b){this.cropped&&(b&&(this.defaults.data={}),this.image=a.extend({},this.defaultImage),this.renderImage(),this.dragger=a.extend({},this.defaultDragger),this.setData(this.defaults.data))},clear:function(){this.cropped&&(this.cropped=e,this.setData({x:0,y:0,width:0,height:0}),this.$canvas.removeClass(o),this.$dragger.addClass(p))},destroy:function(){var a=this.$element;this.ready&&(this.unbuild(),a.removeClass(p).removeData("cropper"),this.rotated&&a.replaceWith(this.$original))},replace:function(b,c){var f,g=this,h=this.$element,i=this.element;b&&b!==this.url&&(c||(this.rotated=e,this.replaced=d),h.is("img")?(h.attr("src",b),this.load()):h.is("canvas")&&this.support.canvas&&(f=i.getContext("2d"),a('<img src="'+b+'">').one("load",function(){i.width=this.width,i.height=this.height,f.clearRect(0,0,i.width,i.height),f.drawImage(this,0,0),g.load()})))},setData:function(b,c){var d=this.cropper,e=this.dragger,g=this.image,h=this.defaults.aspectRatio;this.built&&typeof b!==i&&((b===f||a.isEmptyObject(b))&&(e=a.extend({},this.defaultDragger)),a.isPlainObject(b)&&!a.isEmptyObject(b)&&(c||(this.defaults.data=b),b=this.transformData(b),F(b.x)&&b.x<=d.width-g.left&&(e.left=b.x+g.left),F(b.y)&&b.y<=d.height-g.top&&(e.top=b.y+g.top),h?F(b.width)&&b.width<=e.maxWidth&&b.width>=e.minWidth?(e.width=b.width,e.height=e.width/h):F(b.height)&&b.height<=e.maxHeight&&b.height>=e.minHeight&&(e.height=b.height,e.width=e.height*h):(F(b.width)&&b.width<=e.maxWidth&&b.width>=e.minWidth&&(e.width=b.width),F(b.height)&&b.height<=e.maxHeight&&b.height>=e.minHeight&&(e.height=b.height))),this.dragger=e,this.renderDragger())},getData:function(){var a=this.dragger,b=this.image,c={};return this.built&&(c={x:a.left-b.left,y:a.top-b.top,width:a.width,height:a.height},c=this.transformData(c,d)),c},transformData:function(b,c){var d=this.image.ratio,e={};return a.each(b,function(a,b){b=O(b),m.test(a)&&!isNaN(b)&&(e[a]=c?H(b/d):b*d)}),e},setAspectRatio:function(a){var b="auto"===a;a=O(a),(b||!isNaN(a)&&a>0)&&(this.defaults.aspectRatio=b?g:a,this.built&&(this.initDragger(),this.renderDragger()))},getImageData:function(){var b={};return this.ready&&a.each(this.image,function(a,c){n.test(a)&&(b[a]=c)}),b},getDataURL:function(b,c){var d=a("<canvas>")[0],e=this.getData(),f="";return this.cropped&&this.support.canvas&&(d.width=e.width,d.height=e.height,d.getContext("2d").drawImage(this.$clone[0],e.x,e.y,e.width,e.height,0,0,e.width,e.height),f=d.toDataURL(b,c)),f},setDragMode:function(a){var b=this.$canvas,c=this.defaults,f=e,g=e;if(this.built&&!this.disabled){switch(a){case"crop":c.dragCrop&&(f=d,b.data(j,a));break;case"move":c.movable&&(g=d,b.data(j,a));break;default:b.removeData(j)}b.toggleClass(s,f).toggleClass(r,g)}},enable:function(){this.built&&(this.disabled=e,this.$cropper.removeClass(t))},disable:function(){this.built&&(this.disabled=d,this.$cropper.addClass(t))},rotate:function(a){var b=this.image;a=O(a)||0,this.built&&0!==a&&!this.disabled&&this.defaults.rotatable&&this.support.canvas&&(this.rotated=d,a=b.rotate=(b.rotate+a)%360,this.replace(this.getRotatedDataURL(a),!0))},getRotatedDataURL:function(b){var c=this.$original.clone(),d=a("<canvas>")[0],e=d.getContext("2d"),f=b*Math.PI/180,g=L(b)%180,h=g>90?180-g:g,i=h*Math.PI/180,j=this.originalImage,k=j.naturalWidth,l=j.naturalHeight,m=L(k*N(i)+l*M(i)),n=L(k*M(i)+l*N(i));return d.width=m,d.height=n,e.save(),e.translate(m/2,n/2),e.rotate(f),c.addClass(q).prependTo(this.$cropper),e.drawImage(c[0],-k/2,-l/2,k,l),e.restore(),d.toDataURL()},zoom:function(a){var b,c,d,e=this.image;a=O(a),this.built&&a&&!this.disabled&&this.defaults.zoomable&&(b=e.width*(1+a),c=e.height*(1+a),d=b/e._width,d>10||(1>d&&(b=e._width,c=e._height),this.setDragMode(1>=d?"crop":"move"),e.oldWidth=e.width,e.oldHeight=e.height,e.width=b,e.height=c,e.ratio=e.width/e.naturalWidth,this.renderImage("zoom")))},dblclick:function(){this.disabled||this.setDragMode(this.$canvas.hasClass(s)?"move":"crop")},wheel:function(a){var b,c=a.originalEvent,d=117.25,e=5,f=166.66665649414062,g=.1;this.disabled||(a.preventDefault(),c.deltaY?(b=c.deltaY,b=b%e===0?b/e:b%d===0?b/d:b/f):b=c.wheelDelta?-c.wheelDelta/120:c.detail?c.detail/3:0,this.zoom(b*g))},dragstart:function(b){var c,f,g,h=b.originalEvent.touches,i=b;if(!this.disabled){if(h){if(g=h.length,g>1){if(!this.defaults.zoomable||2!==g)return;i=h[1],this.startX2=i.pageX,this.startY2=i.pageY,c="zoom"}i=h[0]}if(c=c||a(i.target).data(j),l.test(c)){if(b.preventDefault(),f=a.Event(C),this.$element.trigger(f),f.isDefaultPrevented())return;this.directive=c,this.cropping=e,this.startX=i.pageX,this.startY=i.pageY,"crop"===c&&(this.cropping=d,this.$canvas.addClass(o))}}},dragmove:function(b){var c,d,e=b.originalEvent.touches,f=b;if(!this.disabled){if(e){if(d=e.length,d>1){if(!this.defaults.zoomable||2!==d)return;f=e[1],this.endX2=f.pageX,this.endY2=f.pageY}f=e[0]}if(this.directive){if(b.preventDefault(),c=a.Event(D),this.$element.trigger(c),c.isDefaultPrevented())return;this.endX=f.pageX,this.endY=f.pageY,this.dragging()}}},dragend:function(b){var c;if(!this.disabled&&this.directive){if(b.preventDefault(),c=a.Event(E),this.$element.trigger(c),c.isDefaultPrevented())return;this.cropping&&(this.cropping=e,this.$canvas.toggleClass(o,this.cropped&&this.defaults.modal)),this.directive=""}},dragging:function(){var a,b=this.directive,c=this.image,f=this.cropper,g=f.width,h=f.height,i=this.dragger,j=i.width,k=i.height,l=i.left,m=i.top,n=l+j,o=m+k,q=d,r=this.defaults,s=r.aspectRatio,t={x:this.endX-this.startX,y:this.endY-this.startY};switch(s&&(t.X=t.y*s,t.Y=t.x/s),b){case"all":l+=t.x,m+=t.y;break;case"e":if(t.x>=0&&(n>=g||s&&(0>=m||o>=h))){q=e;break}j+=t.x,s&&(k=j/s,m-=t.Y/2),0>j&&(b="w",j=0);break;case"n":if(t.y<=0&&(0>=m||s&&(0>=l||n>=g))){q=e;break}k-=t.y,m+=t.y,s&&(j=k*s,l+=t.X/2),0>k&&(b="s",k=0);break;case"w":if(t.x<=0&&(0>=l||s&&(0>=m||o>=h))){q=e;break}j-=t.x,l+=t.x,s&&(k=j/s,m+=t.Y/2),0>j&&(b="e",j=0);break;case"s":if(t.y>=0&&(o>=h||s&&(0>=l||n>=g))){q=e;break}k+=t.y,s&&(j=k*s,l-=t.X/2),0>k&&(b="n",k=0);break;case"ne":if(s){if(t.y<=0&&(0>=m||n>=g)){q=e;break}k-=t.y,m+=t.y,j=k*s}else t.x>=0?g>n?j+=t.x:t.y<=0&&0>=m&&(q=e):j+=t.x,t.y<=0?m>0&&(k-=t.y,m+=t.y):(k-=t.y,m+=t.y);0>k&&(b="sw",k=0,j=0);break;case"nw":if(s){if(t.y<=0&&(0>=m||0>=l)){q=e;break}k-=t.y,m+=t.y,j=k*s,l+=t.X}else t.x<=0?l>0?(j-=t.x,l+=t.x):t.y<=0&&0>=m&&(q=e):(j-=t.x,l+=t.x),t.y<=0?m>0&&(k-=t.y,m+=t.y):(k-=t.y,m+=t.y);0>k&&(b="se",k=0,j=0);break;case"sw":if(s){if(t.x<=0&&(0>=l||o>=h)){q=e;break}j-=t.x,l+=t.x,k=j/s}else t.x<=0?l>0?(j-=t.x,l+=t.x):t.y>=0&&o>=h&&(q=e):(j-=t.x,l+=t.x),t.y>=0?h>o&&(k+=t.y):k+=t.y;0>j&&(b="ne",k=0,j=0);break;case"se":if(s){if(t.x>=0&&(n>=g||o>=h)){q=e;break}j+=t.x,k=j/s}else t.x>=0?g>n?j+=t.x:t.y>=0&&o>=h&&(q=e):j+=t.x,t.y>=0?h>o&&(k+=t.y):k+=t.y;0>j&&(b="nw",k=0,j=0);break;case"move":c.left+=t.x,c.top+=t.y,this.renderImage("move"),q=e;break;case"zoom":r.zoomable&&(this.zoom(function(a,b,c,d,e,f){return(I(e*e+f*f)-I(c*c+d*d))/I(a*a+b*b)}(c.width,c.height,L(this.startX-this.startX2),L(this.startY-this.startY2),L(this.endX-this.endX2),L(this.endY-this.endY2))),this.endX2=this.startX2,this.endY2=this.startY2);break;case"crop":t.x&&t.y&&(a=this.$cropper.offset(),l=this.startX-a.left,m=this.startY-a.top,j=i.minWidth,k=i.minHeight,t.x>0?t.y>0?b="se":(b="ne",m-=k):t.y>0?(b="sw",
l-=j):(b="nw",l-=j,m-=k),this.cropped||(this.cropped=d,this.$dragger.removeClass(p)))}q&&(i.width=j,i.height=k,i.left=l,i.top=m,this.directive=b,this.renderDragger()),this.startX=this.endX,this.startY=this.endY}},G.TEMPLATE=function(a,b){return b=b.split(","),a.replace(/\d+/g,function(a){return b[a]})}('<0 6="5-container"><0 6="5-canvas"></0><0 6="5-dragger"><1 6="5-viewer"></1><1 6="5-8 8-h"></1><1 6="5-8 8-v"></1><1 6="5-face" 3-2="all"></1><1 6="5-7 7-e" 3-2="e"></1><1 6="5-7 7-n" 3-2="n"></1><1 6="5-7 7-w" 3-2="w"></1><1 6="5-7 7-s" 3-2="s"></1><1 6="5-4 4-e" 3-2="e"></1><1 6="5-4 4-n" 3-2="n"></1><1 6="5-4 4-w" 3-2="w"></1><1 6="5-4 4-s" 3-2="s"></1><1 6="5-4 4-ne" 3-2="ne"></1><1 6="5-4 4-nw" 3-2="nw"></1><1 6="5-4 4-sw" 3-2="sw"></1><1 6="5-4 4-se" 3-2="se"></1></0></0>',"div,span,directive,data,point,cropper,class,line,dashed"),G.DEFAULTS={aspectRatio:"auto",data:{},done:a.noop,preview:"",multiple:e,autoCrop:d,dragCrop:d,dashed:d,modal:d,movable:d,resizable:d,zoomable:d,rotatable:d,minWidth:0,minHeight:0,maxWidth:h,maxHeight:h,build:f,built:f,dragstart:f,dragmove:f,dragend:f},G.setDefaults=function(b){a.extend(G.DEFAULTS,b)},G.other=a.fn.cropper,a.fn.cropper=function(b){var c,d=[].slice.call(arguments,1);return this.each(function(){var e,f=a(this),g=f.data("cropper");g||f.data("cropper",g=new G(this,b)),"string"==typeof b&&a.isFunction(e=g[b])&&(c=e.apply(g,d))}),typeof c!==i?c:this},a.fn.cropper.Constructor=G,a.fn.cropper.setDefaults=G.setDefaults,a.fn.cropper.noConflict=function(){return a.fn.cropper=G.other,this}}),angular.module("uvCropper",[]).directive("uvCropperImg",["$timeout","$q","uvCropperService",function(a,b,c){return{restrict:"EA",scope:{imgUrl:"=",imgRatio:"@",imgMaxWidth:"@",imgCropper:"&",initImgMaxWidth:"@"},replace:!0,transclude:!0,template:'<div ng-click="show($event)" style="cursor:pointer;"><style>.cropper-preview {overflow: hidden;padding: 0;float: left;border-radius: 4px;margin: 0 4px 4px 0;border: 1px solid #eee;}</style><div ng-show="cropperShow" style="width: 980px;margin-left: -490px;margin-right: auto;position:fixed;top:1px;left:50%;z-index: 99999997;"><div class="panel panel-default" style="margin:10px auto;position: relative;z-index: 99999999;box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.4);border:none;"><div class="panel-body "><input type="file" class="btn btn-default" style="line-height: 14px;margin:0px 15px 10px;" onchange="angular.element(this).scope().selectFile(this)"><div ng-show="!!dataUrl" style="margin:14px;"><div class="well well-sm pull-left" style="width:600px;padding: 0;background-color: #000;"><div class="cropper-container" style="padding: 0;height:398px;" ng-show="dataUrl"><img id="_uv_cropper_img" ng-src="{{dataUrl}}"></div></div><div style="width: 300px;margin-left: 10px;" class="pull-left"><div ><div class="cropper-preview" style="width: 250px;height:250px;"></div></div><div ><div class="cropper-preview" style="width: 146px;height:146px;"></div><div class="pull-left"><div><div class="cropper-preview" style="width: 100px;height:100px;"></div></div><div class="cropper-preview" style="width: 41px;height:41px;"></div></div></div></div></div></div><div class="panel-footer text-right"><button class="btn btn-primary btn-sm" ng-click="ok($event)">确定</button><button class="btn btn-default btn-sm" ng-click="cancel($event)" style="margin-left: 10px;">取消</button></div></div><div style="position: fixed;top:0;left:0;width:100%;height:100%;background-color: rgba(2,2,2,0.5);z-index: 99999998;"></div></div><span ng-transclude style="cursor:pointer;margin-left: auto;margin-right: auto;position: relative;width:100%;height:100%;overflow: hidden;"></span></div>',link:function(b,d,e){function f(){b.imgCropper&&b.imgCropper(),c.hideCropperImg(),b.cropperShow=!1,b.dataUrl="",b.inputFileElement.value=""}b.cropperShow=!1;var g=d.find("#_uv_cropper_img");b.options={aspectRatio:1,preview:".cropper-preview"},b.imgRatio&&(b.options.aspectRatio=b.imgRatio),b.selectFile=function(a){b.inputFileElement=a,b.imgFile=a.files[0],c.selectImgFile(b.imgFile,g,b.options,b.initImgMaxWidth).then(function(a){b.dataUrl=a,console.log(a.substr(0,200))}),b.initImgMaxWidth},b.ok=function(d){b.dataUrl?b.imgMaxWidth?c.getScaleCropperImgDataUrl(parseInt(b.imgMaxWidth)).then(function(c){return b.imgUrl=c.split(",")[1],a(f),c}):c.getScaleCropperImgDataUrl(400).then(function(c){return b.imgUrl=c.split(",")[1],a(f),c}):(b.cropperShow=!1,d.stopPropagation())},b.cancel=function(a){console.log(a),a.stopPropagation(),console.log(b.cropperShow),b.cropperShow=!1,console.log(b.cropperShow),c.hideCropperImg(),b.dataUrl=""},b.show=function(a){b.cropperShow=!0}}}}]).service("uvCropperService",["$timeout","$q","_Cropper",function(a,b,c){function d(a,c){console.log("preprocess begin"),a=a||{};var d=b.defer(),g=[e(a)];return a.maximize&&g.push(f(a,c)),b.all(g).then(function(a){var b=a[a.length-1];d.resolve(b)}),console.log("preprocess end"),d.promise}function e(a){var c=b.defer();return c.resolve(a),c.promise}function f(a,c){var d=b.defer();return g(c).then(function(b){a.data=b,d.resolve(a)}),d.promise}function g(a){var c=b.defer(),d=new Image;return d.onload=function(){c.resolve({width:d.width,height:d.height})},d.src=a.src,c.promise}var h=!1,i=this;this.element={rootElement:void 0,imgElement:void 0};var j,k,l;this.selectImgFile=function(d,e,f,g){return k=d,i.element.imgElement=e,l=f,l.done=function(a){j=a},function(){if(g)return i.scaleImg(d,g);var a=b.defer();return a.resolve(k),a.promise}().then(c.encode).then(function(b){return a(i.reCropperImg),b})},this.scaleImg=function(a,b){return c.scale(a,{width:b}).then(function(a){return k=a,a})},this.reCropperImg=function(){i.hideCropperImg(),i.showCropperImg()},this.showCropperImg=function(){h||(h=!0,d(l,i.element.imgElement[0]).then(function(a){i.element.imgElement.cropper(a)}))},this.hideCropperImg=function(){h&&(h=!1,i.element.imgElement.cropper("destroy"))},this.disableCropper=function(a){h&&(a&&i.element.imgElement.cropper("disable"),a||i.element.imgElement.cropper("enable"))},this.getCropperImgDataUrl=function(){return c.crop(k,j).then(c.encode).then(function(a){return a})},this.getScaleCropperImgDataUrl=function(a){return c.crop(k,j).then(function(b){return c.scale(b,{width:a})}).then(c.encode).then(function(a){return a})}}]).service("_Cropper",["$q",function(a){function b(b){var c=a.defer(),d=new Image;return d.onload=function(a){c.resolve(a.target)},d.src=b,c.promise}function c(a){var b=document.createElement("canvas");return b.width=a.width,b.height=a.height,b.style.display="none",document.body.appendChild(b),b}function d(a){a.parentElement.removeChild(a)}this.encode=function(b){var c=a.defer(),d=new FileReader;return d.onload=function(a){c.resolve(a.target.result)},d.readAsDataURL(b),c.promise},this.decode=function(a){for(var b=a.split(";")[0],c=b.split(":")[1],d=atob(a.split(",")[1]),e=new Uint8Array(d.length),f=0;f<d.length;f++)e[f]=d.charCodeAt(f);return new Blob([e],{type:c})},this.crop=function(e,f){var g=a.defer(),h=this.decode;return this.encode(e).then(b).then(function(a){var b=c(f),i=b.getContext("2d");i.drawImage(a,f.x,f.y,f.width,f.height,0,0,f.width,f.height);var j=b.toDataURL(e.type),k=h(j);g.resolve(k),d(b)}),g.promise},this.scale=function(e,f){var g=a.defer(),h=this.decode;return this.encode(e).then(b).then(function(a){var b,i,j,k=a.height,l=a.width;angular.isNumber(f)&&(b=f,i=k*b,j=l*b),angular.isObject(f)&&(b=l/k,i=f.height,j=f.width,i&&!j?j=i*b:j&&!i&&(i=j/b));var m=c(f),n=m.getContext("2d");m.height=i,m.width=j,n.drawImage(a,0,0,l,k,0,0,j,i);var o=m.toDataURL(e.type),p=h(o);g.resolve(p),d(m)}),g.promise}}]),angular.module("uv.service.dialog",["ngDialog"]).service("uvDialog",["$rootScope","ngDialog",function(a,b){function c(a){return b.open({template:'<div class="panel panel-primary" style="border:none;margin:-20px;"><div class="panel-body" style="font-size: 13px;">'+a+'</div><div class="panel-footer" style="overflow: auto;">   <button class="btn btn-sm btn-primary pull-right" ng-click="closeThisDialog(1)">确定</button></div></div>',plain:!0,showClose:!1}).closePromise.then(function(a){return a.value})}function d(a){return b.open({template:'<div class="panel panel-primary" style="border:none;margin:-20px;"><div class="panel-body" style="font-size: 13px;">'+a+'</div><div class="panel-footer" style="overflow: auto;">   <button class="btn btn-sm btn-default pull-right" style="margin-left: 10px;" ng-click="closeThisDialog()">取消</button>   <button class="btn btn-sm btn-primary pull-right" ng-click="closeThisDialog(1)">确定</button></div></div>',plain:!0,showClose:!1}).closePromise.then(function(a){return a.value})}this.show=function(a){return c(a)},this.confirm=function(a){return d(a)},this.showTemplate=function(a,b,c,d,f){return e(a,b,c,d,f)};var e=function(a,c,d,e,f){if(a){angular.forEach(d,function(a,b){c[b]=a});var g={scope:c,closeByDocument:!1,showClose:!1,overlay:!0,template:a};return e&&(g.controller=e),f&&(g.resolve=f),b.open(g).closePromise.then(function(a){return angular.forEach(a,function(a,b){delete c[b]}),a.value})}}}]),angular.module("uv.fixed",[]).directive("uvSticky",["$document","$timeout",function(a,b){return{restrict:"EA",replace:!0,transclude:!0,template:"<div ng-transclude></div>",scope:{},link:function(c,d,e){b(function(){var b=angular.element("<div></div>").attr("style",d.attr("style")).attr("class",d.attr("class")).css("width",d.css("width")).css("display",d.css("display")||"block").css("position",d.css("position")).css("opacity","0").insertBefore(d);d.css("background");c.uvStickyTop=parseInt(e.uvSticky||10);var f=b.offset().top,g=b.offset().left,h=f-parseInt(d.css("margin-top"))-c.uvStickyTop;d.css("position","absolute").css("overflow","auto").css("max-height",angular.element(window).height()-f).css("width",b.css("width")).attr("class",b.attr("class")).css("background",b.css("background")).css("border",b.css("border")).offset(b.offset()),b.css("height",d.css("height")).css("border","none").css("background","rgba(0,0,0,0)"),a.scroll(function(){a.scrollTop()>h?"fixed"!=d.css("position")&&d.css("position","fixed").css({top:c.uvStickyTop,left:g}).css("z-index","9999"):("fixed"==d.css("position")&&d.css("position","absolute"),d.offset().top!=f&&d.offset(b.offset()).css("z-index",1))})})}}}]).service("WHService",["$window","$document",function(a,b){function c(){var a="";a+="\r\ndocument.body.clientWidth :网页可见区域宽："+document.body.clientWidth,a+="\r\ndocument.body.clientHeight:网页可见区域高："+document.body.clientHeight,a+="\r\ndocument.body.offsetWidth :网页可见区域宽："+document.body.offsetWidth+" (包括边线和滚动条的宽)",a+="\r\ndocument.body.offsetHeight:网页可见区域高："+document.body.offsetHeight+" (包括边线的宽)",a+="\r\ndocument.body.scrollWidth :网页正文全文宽："+document.body.scrollWidth,a+="\r\ndocument.body.scrollHeight:网页正文全文高："+document.body.scrollHeight,a+="\r\ndocument.body.scrollTop   :网页被卷去的高(ff)："+document.body.scrollTop,a+="\r\ndocument.documentElement.scrollTop:网页被卷去的高(ie)："+document.documentElement.scrollTop,a+="\r\ndocument.body.scrollLeft  :网页被卷去的左："+document.body.scrollLeft,a+="\r\nwindow.screenTop          :网页正文部分上："+window.screenTop,a+="\r\nwindow.screenLeft         :网页正文部分左："+window.screenLeft,a+="\r\nwindow.screen.height      :屏幕分辨率的高："+window.screen.height,a+="\r\nwindow.screen.width       :屏幕分辨率的宽："+window.screen.width,a+="\r\nwindow.screen.availHeight :屏幕可用工作区高度:"+window.screen.availHeight,a+="\r\nwindow.screen.availWidth  :屏幕可用工作区宽度："+window.screen.availWidth,a+="\r\nwindow.screen.colorDepth  :你的屏幕设置是 "+window.screen.colorDepth+" 位彩色",a+="\r\nwindow.screen.colorDepth  :你的屏幕设置 "+window.screen.deviceXDPI+" 像素/英寸",console.log(a)}return{getWH:c}}]),angular.module("uv.service.loading",[]).run(["$templateCache","$rootScope","uvLoading",function(a,b,c){b._uv_loading={show:!1},a.put("uv-loading.html",'<div ng-show="_uv_loading.show" style="z-index: 9999999998;"><div   style="z-index: 9999999999;       position: fixed;       top:50%;       left:50%;       height:110px;       margin-top: -55px;       width:114px;       background-color:#000;       color:#f2f2f2;       margin-left: -57px;       border-radius:6px;       padding: 5px;   "><img src="'+c._gif_path+'"></div><div style="position: fixed;top:0;left:0;width: 100%;height:100%;background-color: rgba(0,0,0,0.3);z-index: 99999;"></div></div>'),angular.element(a.get("uv-loading.html")).appendTo(angular.element("body"))}]).provider("uvLoading",[function(){var a="";this.setLoadingGif=function(b){a=b};var b;this.$get=["$rootScope","$timeout",function(c,d){return{loading:function(a){if(this._loadCount++,c._uv_loading.show=!0,a){var e=this;b=d(function(){e.unloading()},a)}},unloading:function(){--this._loadCount<=0&&(c._uv_loading.show=!1)},_gif_path:a,_loadCount:0}}]}]),angular.module("uv.service.tip",[]).run(["$templateCache","$rootScope","uvTip",function(a,b,c){b._uv_tip={show:!1},a.put("uv-tip.html",'<div ng-show="_uv_tip.show" ng-click="_hideTip()" style="top:0;left:0;position: fixed;width:100%;height: 100%;background-color: rgba(0,0,0,0);z-index:99999;"><div id="_uv_tip_father" style="top:70px;position: relative;"><div id="_uv_tip" class="_uv_tip" style="margin:auto;color: #fff;background-color:rgba(0,0,0,0.7);position: relative;max-width: 80%;min-width: 10%;width:30%;-moz-border-radius: 6px;-webkit-border-radius: 6px;border-radius: 6px;padding:10px;text-align: center;"></div></div></div>'),b._uv_tip.rootElement=angular.element(a.get("uv-tip.html")),b._uv_tip.contentElement=b._uv_tip.rootElement.children("#_uv_tip_father").children("#_uv_tip"),b._uv_tip.rootElement.appendTo(angular.element("body")),b._hideTip=function(){c.hideTip()},console.log(b._uv_tip.contentElement.html())}]).service("uvTip",["$rootScope","$timeout","$q",function(a,b,c){var d,e;return{showTip:function(f,g){if(a._uv_tip.contentElement.html(f),a._uv_tip.show=!0,e=c.defer(),g){var h=this;d=b(function(){h.hideTip()},g)}return e.promise},hideTip:function(){a._uv_tip.show=!1,console.log("hidetip"),console.log(e),e&&e.resolve(!0)}}}]);var _TREE_DEBUG=!1;dTree.prototype.addDetail=function(a,b,c,d,e,f,g,h,i,j,k){this.aNodes[this.aNodes.length]=new Node(a,b,c,d,e,i,j,k,h,f,g)},dTree.prototype.add=function(a,b,c,d,e,f,g,h){this.aNodes[this.aNodes.length]=new Node(a,b,c,d,e,"","","",h,f,g)},dTree.prototype.init=function(){for(var a=0;a<this.selectedNode.length;a++)this.openTo(-1==this.aNodes[this.selectedNode[a]].pid?this.aNodes[this.selectedNode[a]].id:this.aNodes[this.selectedNode[a]].pid)},dTree.prototype.openAll=function(){this.oAll(!0)},dTree.prototype.closeAll=function(){this.oAll(!1)},dTree.prototype.toString=function(){var a='<div class="dtree">';return a+=document.getElementById?this.addNode(this.root):"Browser not supported.",a+="</div>",this.completed=!0,a},dTree.prototype.addNode=function(a){var b="",c=0;for(this.config.inOrder&&(c=a._ai),c;c<this.aNodes.length;c++)if(this.aNodes[c].pid==a.id){var d=this.aNodes[c];if(d._p=a,d._ai=c,this.setCS(d),!d.target&&this.config.target&&(d.target=this.config.target),!this.config.folderLinks&&d._hc&&(d.url=null),d._is&&this.addSelectedNode(c),b+=this.node(d,c),d._ls)break}return b},dTree.prototype.node=function(a,b){var c='<div class="dTreeNode">'+this.indent(a,b);return this.config.useIcons&&(a.icon||(a.icon=this.root.id==a.pid?this.icon.root:a._hc?this.icon.folder:this.icon.node),a.iconOpen||(a.iconOpen=a._hc?this.icon.folderOpen:this.icon.node),this.root.id==a.pid&&(a.icon=this.icon.root,a.iconOpen=this.icon.root),c+='<img id="i'+this.obj+b+'" src="'+(a._io?a.iconOpen:a.icon)+'" alt="" />'),1==this.config.checkbox&&(c+='<input type="checkbox" name="checkboxValues"  style="cursor:pointer;" value="'+a.id+'" id="c'+this.obj+a.id+'" onClick="javascript:'+this.obj+".cc(&quot;"+a._ai+"&quot;,&quot;"+a._p._ai+'&quot;);" '+(a._is?"checked":"")+"/>"),!this.config.multiSelect||a.url?(c+='<a id="s'+this.obj+b+'" class="'+(this.config.useSelection&&a._is?"nodeSel":"node")+'" href="'+(a.url||"javascript:;")+'"',a.title&&(c+=' title="'+a.title+'"'),!this.config.multiSelect&&this.config.useSelection&&(a._hc&&this.config.folderLinks||!a._hc)&&(c+=' onclick="javascript: '+this.obj+".s("+b+');"'),c+=">"):this.config.folderLinks&&a.url||!a._hc||a.pid==this.root.id||(c+='<a href="javascript: '+this.obj+".o("+b+');" class="node">'),c+=a.name,this.config.multiSelect&&!a.url&&(this.config.folderLinks&&a.url||!a._hc)||(c+="</a>"),c+="</div>",a._hc&&(c+='<div id="d'+this.obj+b+'" class="clip" style="display:'+(this.root.id==a.pid||a._io?"block":"none")+';">',c+=this.addNode(a),c+="</div>"),this.aIndent.pop(),c},dTree.prototype.indent=function(a,b){var c="";if(this.root.id!=a.pid){for(var d=0;d<this.aIndent.length;d++)c+='<img src="'+(1==this.aIndent[d]&&this.config.useLines?this.icon.line:this.icon.empty)+'" alt="" />';a._ls?this.aIndent.push(0):this.aIndent.push(1),a._hc?(c+='<a href="javascript: '+this.obj+".o("+b+');"><img id="j'+this.obj+b+'" src="',c+=this.config.useLines?a._io?a._ls&&this.config.useLines?this.icon.minusBottom:this.icon.minus:a._ls&&this.config.useLines?this.icon.plusBottom:this.icon.plus:a._io?this.icon.nlMinus:this.icon.nlPlus,c+='" alt="" /></a>'):c+='<img src="'+(this.config.useLines?a._ls?this.icon.joinBottom:this.icon.join:this.icon.empty)+'" alt="" />'}return c},dTree.prototype.setCS=function(a){for(var b,c=0;c<this.aNodes.length;c++)this.aNodes[c].pid==a.id&&(a._hc=!0),this.aNodes[c].pid==a.pid&&(b=this.aNodes[c].id);b==a.id&&(a._ls=!0)},dTree.prototype.getSelected=function(){if(!this.selectedFound)return null;if(this.config.multiSelect){for(var a=[],b=0;b<this.selectedNode.length;b++){var c=this.aNodes[this.selectedNode[b]];c.userData?a[b]=c.userData:a[b]={id:c.id,name:c.name,userData:c.userData}}return a}var c=this.aNodes[this.selectedNode[0]];return c.userData?c.userData:{id:c.id,name:c.name}},dTree.prototype.getSelectedNodePath=function(){var a;if(!this.selectedFound)return null;if(this.config.multiSelect);else{var b=this.aNodes[this.selectedNode[0]];for(a=b.name;-1!=b.pid;){var c=b._p;a=c.name+a,b=c}}return a},dTree.prototype.removeSeletedNode=function(a){this.aNodes[a]._is=!1;for(var b=0;b<this.selectedNode.length;b++)if(this.selectedNode[b]==a){this.selectedNode.splice(b,1);break}return 0==this.selectedNode.length&&(this.selectedFound=!1),this.selectedNode.length},dTree.prototype.addSelectedNode=function(a){for(var b=0;b<this.selectedNode.length;b++)if(this.selectedNode[b]==a)return this.selectedNode.length;return this.aNodes[a]._is=!0,this.selectedNode[this.selectedNode.length]=a,this.selectedFound=!0,this.selectedNode.length},dTree.prototype.isSelectedNode=function(a){for(var b=0;b<this.selectedNode.length;b++)if(this.selectedNode[b]==a)return!0;return!1},dTree.prototype.s=function(a){if(this.config.useSelection){var b=this.aNodes[a];if(!b._hc||this.config.folderLinks)if(b._is){var c=document.getElementById("s"+this.obj+a);c.className="node",this.removeSeletedNode(a),b._is=!1}else{if(!this.config.multiSelect&&this.selectedFound)for(var d=0;d<this.selectedNode.length;){var c=document.getElementById("s"+this.obj+this.selectedNode[d]);c.className="node",this.aNodes[this.selectedNode[d]]._is=!1,this.removeSeletedNode(this.selectedNode[d])}var e=document.getElementById("s"+this.obj+a);e.className="nodeSel",b._is=!0,this.addSelectedNode(a)}}},dTree.prototype.clearSelected=function(){for(var a=0;a<this.selectedNode.length;){var b=document.getElementById("s"+this.obj+this.selectedNode[a]);b.className="node",this.selectedNode.splice(a,1)}},dTree.prototype.o=function(a){var b=this.aNodes[a];this.nodeStatus(!b._io,a,b._ls),b._io=!b._io,this.config.closeSameLevel&&this.closeLevel(b)},dTree.prototype.oAll=function(a){for(var b=0;b<this.aNodes.length;b++)this.aNodes[b]._hc&&this.aNodes[b].pid!=this.root.id&&(this.nodeStatus(a,b,this.aNodes[b]._ls),this.aNodes[b]._io=a)},dTree.prototype.openTo=function(a,b,c){if(_TREE_DEBUG&&alert(a),!c)for(var d=0;d<this.aNodes.length;d++)if(this.aNodes[d].id==a){a=d;break}var e=this.aNodes[a];e.pid!=this.root.id&&e._p&&(e._io=!0,e._is=b,this.completed&&e._hc&&this.nodeStatus(!0,e._ai,e._ls),this.completed&&b?this.s(e._ai):b&&(this._sn=e._ai),this.openTo(e._p._ai,!1,!0))},dTree.prototype.closeLevel=function(a){for(var b=0;b<this.aNodes.length;b++)this.aNodes[b].pid==a.pid&&this.aNodes[b].id!=a.id&&this.aNodes[b]._hc&&(this.nodeStatus(!1,b,this.aNodes[b]._ls),this.aNodes[b]._io=!1,this.closeAllChildren(this.aNodes[b]))},dTree.prototype.closeAllChildren=function(a){for(var b=0;b<this.aNodes.length;b++)this.aNodes[b].pid==a.id&&this.aNodes[b]._hc&&(this.aNodes[b]._io&&this.nodeStatus(!1,b,this.aNodes[b]._ls),this.aNodes[b]._io=!1,this.closeAllChildren(this.aNodes[b]))},dTree.prototype.nodeStatus=function(a,b,c){var d=document.getElementById("d"+this.obj+b),e=document.getElementById("j"+this.obj+b);if(this.config.useIcons){var f=document.getElementById("i"+this.obj+b);f.src=a?this.aNodes[b].iconOpen:this.aNodes[b].icon}e.src=this.config.useLines?a?c?this.icon.minusBottom:this.icon.minus:c?this.icon.plusBottom:this.icon.plus:a?this.icon.nlMinus:this.icon.nlPlus,d.style.display=a?"block":"none"},dTree.prototype.cc_parent=function(a,b){var c=this.aNodes[a];if(b)this.addSelectedNode(a),document.getElementById("c"+this.obj+c.id).checked=b,-1!=c.pid&&this.cc_parent(c._p._ai,b);else{for(var d=!1,e=0;e<this.selectedNode.length;e++)if(this.aNodes[this.selectedNode[e]].pid==c.id){d=!0;break}d||(this.removeSeletedNode(a),document.getElementById("c"+this.obj+c.id).checked=b,-1!=c.pid&&this.cc_parent(c._p._ai,b))}},dTree.prototype.cc_children=function(a,b,c){for(var d=this.aNodes[a],e=c||a;e<this.aNodes.length;e++)this.aNodes[e].pid==d.id&&(document.getElementById("c"+this.obj+this.aNodes[e].id).checked=b,b?this.addSelectedNode(e):this.removeSeletedNode(e),this.aNodes[e]._hc&&this.cc_children(e,b,1))},dTree.prototype.cc=function(a,b){var c=this.aNodes[a],d=document.getElementById("c"+this.obj+c.id).checked;this.cc_children(a,d,1)},Array.prototype.push||(Array.prototype.push=function(){for(var a=0;a<arguments.length;a++)this[this.length]=arguments[a];return this.length}),Array.prototype.pop||(Array.prototype.pop=function(){var a=this[this.length-1];return this.length=Math.max(this.length-1,0),a}),angular.module("uv.directive.tree",[]).provider("uvTree",[function(){var a="./img";return{setImgFolder:function(b){a=b},$get:function(){return{imgFolder:a,defaultTreeName:"_tree_3380915",getTree:function(a){return{getSelected:function(){return window[a]?window[a].getSelected():null}}}}}}}]).directive("uvTree",["$timeout","uvTree",function(a,b){return{restrict:"A",template:"<div></div>",scope:{uvTreeData:"=",uvTreeNodeIdKey:"@",uvTreeNodeParentIdKey:"@",uvTreeNodeNameKey:"@",uvTreeNodeSelectedKey:"@",uvTreeMultiSelect:"@",uvTreeSelectNodeFunc:"@"},link:function(a,c,d){a.$watch("uvTreeData",function(e){if(e){var f,g=d.uvTree||b.defaultTreeName;a.uvTreeSelectNodeFunc&&(f=a.$parent[a.uvTreeSelectNodeFunc.split("(")[0]]),window[g]=new dTree(g,b.imgFolder),a.$parent[g]=window[g],window[g].config.multiSelect=!!a.uvTreeMultiSelect,window[g].config.checkbox=!!a.uvTreeMultiSelect,window[g].config.useIcons=!1;var h=a.uvTreeNodeIdKey,i=a.uvTreeNodeParentIdKey,j=a.uvTreeNodeNameKey,k=a.uvTreeNodeSelectedKey;window[g+"_selectNode"]=function(b){f&&f(a.treeJSON[b])},a.treeJSON={},angular.forEach(a.uvTreeData,function(b){a.treeJSON[b[h]]=b,window[g].add(b[h],b[i],b[j],"javascript:"+g+"_selectNode("+b[h]+");","",b[k],b,!0)});var l=window[g].toString();c.html(l)}},!0)}}}]),angular.module("uv.service.websocket",[]).provider("uvWebsocket",[function(){var a=window.location.pathname;a=!a||a.length<2?"":a.substring(1,a.substring(1).indexOf("/")+1);var b={host:window.location.host,appName:a};this.setWSConfig=function(a){this._config={},angular.extend(this._config,b,a)},this.setWSHost=function(a){this._config||(this._config=b),this._config.host=a},this.setWSAppName=function(a){this._config||(this._config=b),this._config.appName=a},this.$get=["$q",function(a){var b=this;return{websocket:function(a){var c;return c="ws://"==a.substr(0,5)?a:"ws://"+b._config.host+b._config.appName+"/"+a,console.log("ready to create websocket:"+c),this.ws=$.websocket(c),this},onopen:function(a){var b=this;return this.ws.websocket.onopen=function(c){a.call(b,c)},this},onmessage:function(a){var b=this;return this.ws.websocket.onmessage=function(c){a.call(b,c)},this},onerror:function(a){var b=this;return this.ws.websocket.onerror=function(c){a.call(b,c)},this},onclose:function(a){var b=this;return this.ws.websocket.onclose=function(c){a.call(b,c)},this},send:function(b){var c=a.defer(),d=this,e=function(){0==d.ws.websocket.readyState?(console.log("websocket.readyState:"+d.ws.websocket.readyState),setTimeout(e,100)):1==d.ws.websocket.readyState?(d.ws.websocket.send(b),c.resolve(d)):c.reject("websocket is closed")};return e(),c},close:function(a,b){this.ws.websocket.close(a,b)}}}]}]),angular.module("uvm.service.alert",["ngMaterial"]).service("uvmAlert",["$mdDialog","$timeout",function(a,b){this.alert=function(c,d,e,f){function g(){return h=a.alert().title(d).textContent(c).targetEvent(f).ok("关闭"),a.show(h)["finally"](function(){h=void 0})}var h;return e&&b(function(){h&&a.hide()},1e3*e),g()},this.confirm=function(b,c,d){function e(){return f=a.confirm().title(c).textContent(b).targetEvent(d).ok("确定").cancel("取消"),a.show(f)["finally"](function(){f=null})}var f;return e()},this.prompt=function(b,c){function d(){return e=a.prompt().textContent(b).targetEvent(c).ok("确定").cancel("取消"),a.show(e)["finally"](function(){e=null})}var e;return d()}}]);